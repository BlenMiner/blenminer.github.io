(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{23:function(e,t,n){var a=n(80);"string"==typeof a&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(22)(a,o);a.locals&&(e.exports=a.locals)},3:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(8),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-row",{staticStyle:{position:"absolute"},attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"70",width:"7",color:"#005685"}}),e._v(" "),n("h1",[e._v("Loading")])],1)],1)],1)],1),e._v(" "),n("v-snackbar",{attrs:{absolute:"",top:"",right:"",color:"success"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[n("span",[e._v("Post successful!")]),e._v(" "),n("v-icon",{attrs:{dark:""}},[e._v("\n            mdi-checkbox-marked-circle\n        ")])],1),e._v(" "),n("v-snackbar",{attrs:{absolute:"",top:"",right:"",color:"error"},model:{value:e.snackbarerror,callback:function(t){e.snackbarerror=t},expression:"snackbarerror"}},[n("span",[e._v("Post failed")]),e._v(" "),n("v-icon",{attrs:{dark:""}},[e._v("\n            mdi-minus-box\n        ")])],1),e._v(" "),n("v-card",{staticClass:"py-0",attrs:{flat:""}},[n("v-autocomplete",{attrs:{"auto-select-first":"",dense:"",filled:"",items:e.communities,label:"Community"},model:{value:e.communityId,callback:function(t){e.communityId=t},expression:"communityId"}}),e._v(" "),n("v-form",{ref:"form",staticClass:"py-0",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("v-container",{staticClass:"py-0",attrs:{fluid:""}},[n("v-row",e._l(e.formFields,(function(t,a){return n("v-col",{key:a,staticClass:"py-0",attrs:{cols:1==t.type?12:6}},[0==t.type?n("v-text-field",{attrs:{rules:e.rules.requiredstr,color:"purple darken-2",label:t.name.split(";")[0],required:"",outlined:"",dense:"",placeholder:t.name.split(";")[1]},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):1==t.type?n("v-textarea",{attrs:{rules:e.rules.requiredstr,color:"teal",required:"",outlined:"",rows:"3",placeholder:t.name.split(";")[1]},scopedSlots:e._u([{key:"label",fn:function(){return[n("div",[e._v("\n                                "+e._s(t.name.split(";")[0])+"\n                            ")])]},proxy:!0}],null,!0),model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e._e(),e._v(" "),2==t.type?n("v-text-field",{attrs:{rules:e.rules.requiredstr,color:"red darken-2",type:"number",label:t.name.split(";")[0],required:"",outlined:"",dense:"",placeholder:t.name.split(";")[1]},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e._e(),e._v(" "),3==t.type?n("v-checkbox",{staticClass:"ma-0",attrs:{label:t.name.split(";")[0],placeholder:t.name.split(";")[1]},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):4==t.type?n("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(a){var o=a.on,r=a.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:t.name.split(";")[0],rules:e.rules.requiredstr,"prepend-icon":"mdi-calendar",readonly:"",required:"",outlined:"",dense:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}},"v-text-field",r,!1),o))]}}],null,!0),model:{value:t.model,callback:function(n){e.$set(t,"model",n)},expression:"item.model"}},[e._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.model=!1}}},[e._v("\n                                    Close\n                                ")])],1)],1):e._e(),e._v(" "),5==t.type?n("v-text-field",{attrs:{rules:e.rules.requiredstr,color:"green darken-2",type:"number",prefix:"â‚¬",label:t.name.split(";")[0],required:"",outlined:"",dense:"",placeholder:t.name.split(";")[1]},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}):e._e()],1)})),1)],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{rounded:"",width:"45%",color:"red",dark:""},on:{click:e.resetForm}},[e._v("\n                    Reset Form\n                ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{disabled:!e.formIsValid,color:"primary",type:"submit",rounded:"",width:"45%"}},[e._v("\n                    Post Form\n                ")])],1)],1)],1)],1)};r._withStripped=!0;var i=n(178);n(61),n(68);o.a.use(i.a);var l=new o.a,s=new i.a({icons:{iconfont:"mdi"}});function d(e,t){requirejs(["DS/WAFData/WAFData"],(function(n){n.authenticatedRequest(e,t)}))}var u={name:"App",data:function(){var e=Object.freeze({company:"",commercialTeam:"",presentCompany:"",opportunity:""});return{search:null,msg:"[NULL]",loading:!1,snackbar:!1,snackbarerror:!1,tenantId:0,tenants:[],communities:[],communitiesIds:{},communityId:"",formFields:[],formDesiredLength:0,form:Object.assign({},e),rules:{requiredstr:[function(e){return(e||"").length>0||"This field is required"}]},defaultForm:e}},computed:{message:function(){return this.$store.state.message},formIsValid:function(){for(var e=0;e<this.formFields.length;++e)if(!this.formFields[e].value&&3!==this.formFields[e].type)return!1;return!0}},mounted:function(){var e=this,t=this;widget.name="",l.$on("onSearch",(function(e){t.search=e})),l.$on("reloadwidget",(function(){t.reload()})),l.$on("OnEventCountChanged",(function(e,n){t.refreshPrefs(e,n)})),t.loading=!0,void 0===widget.id?t.tenantDataLoaded([{id:-1}]):requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(t){t.getPlatformServices({platformId:void 0,onComplete:e.tenantDataLoaded})}))},methods:{refreshPrefs:function(e,t){if(t<e)for(var n=t;n<e;++n)widget.addPreference({name:"_Field[".concat(n,"]_Type_"),type:"hidden"}),widget.addPreference({name:"_Field[".concat(n,"]_Name_"),type:"hidden"});console.log("Old field coud: "+e+", new: "+t);for(var a=0;a<t;++a)widget.addPreference({name:"_Field[".concat(a,"]_Type_"),type:"list",label:"Field "+a,options:[{value:0,label:"Text Field"},{value:1,label:"Rich Text Field"},{value:2,label:"Number Field"},{value:3,label:"Checkbox Field"},{value:4,label:"Date Field"},{value:5,label:"Money Field"}],defaultValue:0}),widget.addPreference({name:"_Field[".concat(a,"]_Name_"),type:"text",label:" ",defaultValue:"Field ".concat(a)})},resetForm:function(){this.form=Object.assign({},this.defaultForm),this.$refs.form.reset()},submit:function(){this.setCookie("_CurrentCommunityID_",this.communityId,365),window.scrollTo({top:0,left:0,behavior:"smooth"});for(var e="",t=0;t<this.formFields.length;++t)e+="<p> <b>".concat(this.formFields[t].name.split(";")[0],":</b> ").concat(this.formFields[t].vale," </p>");this.swymAddPost(this.communitiesIds[this.communityId],widget.getValue("_PostTitle_"),e,1),this.resetForm()},setCookie:function(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var o="expires="+a.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"},getCookie:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},tenantDataLoaded:function(e){this.tenants=[];for(var t=[],n=0,a=0;a<e.length;a++)void 0!==e[a]["3DSwym"]&&(t.push({value:"".concat(n++),label:"".concat(e[a].platformId," - ").concat(e[a].displayName)}),this.tenants.push(e[a]));widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:t}),widget.addPreference({name:"_PostTitle_",type:"text",label:"Post Title",defaultValue:"My Form"}),widget.addPreference({name:"_FieldCount_",type:"range",label:"Fields Count (You need to apply for this to take effect)",defaultValue:0,step:1,min:0,max:50,onchange:"OnEventCountChanged"}),this.formDesiredLength=widget.getValue("_FieldCount_"),l.$emit("reloadwidget")},swymCommunities:function(e){if(void 0!==widget.id){var t=this.tenants[this.tenantId]["3DSwym"];d(t+"/api/index/tk",{method:"GET",onComplete:function(n){var a=JSON.parse(n).result.ServerToken;d(t+"/api/community/listmycommunities/creation_granted_for/post",{method:"GET",headers:{"X-DS-SWYM-CSRFTOKEN":a},onComplete:function(t){var n=JSON.parse(t);e(n)},onFailure:function(e){console.error(e)}})},onFailure:function(e){console.error(e)}})}else e({result:[{id:"1245152",title:"hello"},{id:"1291515",title:"world"}]})},swymAddPost:function(e,t,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0!==widget.id){var r=this,i=r.tenants[r.tenantId]["3DSwym"];d(i+"/api/index/tk",{method:"GET",onComplete:function(r){var l=JSON.parse(r).result.ServerToken,s={title:t,community_id:e,message:n,published:o.toString()};d(i+"/api/post/add",{method:"POST",headers:{"X-DS-SWYM-CSRFTOKEN":l,"Content-type":"application/json; charset=UTF-8"},data:JSON.stringify({params:s}),onComplete:function(e){a.snackbar=!0},onFailure:function(e){a.snackbarerror=!0}})},onFailure:function(e){console.error(e)}})}else console.log("Post on community: "+e)},reload:function(){var e=this;if(e.tenantId=widget.getValue("_CurrentTenantID_"),e.formDesiredLength=widget.getValue("_FieldCount_"),e.communityId=e.getCookie("_CurrentCommunityID_"),e.loading=!0,e.refreshPrefs(e.formDesiredLength,e.formDesiredLength),e.formFields=[],void 0===widget.id)e.formDesiredLength=2,e.formFields.push({type:0,name:"Hello",value:""}),e.formFields.push({type:1,name:"World;Some hints",value:""}),e.formFields.push({type:4,name:"When???;Some hints",value:""}),e.formFields.push({type:2,name:"Some number;Some hints",value:""}),e.formFields.push({type:5,name:"MONEY MONEY;Some hints",value:""}),e.formFields.push({type:3,name:"It's binary bro;Some hints",value:""});else for(var t=0;t<e.formDesiredLength;++t){var n=widget.getValue("_Field[".concat(t,"]_Type_")),a=widget.getValue("_Field[".concat(t,"]_Name_"));e.formFields.push({type:n,name:a,value:""})}e.swymCommunities((function(t){e.communitiesIds={};for(var n=0;n<t.result.length;++n)e.communitiesIds[t.result[n].title]=t.result[n].id,e.communities.push(t.result[n].title);t.result.length>0&&!e.communitiesIds[e.communityId]&&(e.communityId=t.result[0].title),e.loading=!1}))}}},c=(n(79),n(81)),m=n(82),f=n.n(m),p=n(169),v=n(179),h=n(50),g=n(54),b=n(55),y=n(182),_=n(170),w=n(171),k=n(180),F=n(181),C=n(172),S=n(37),x=n(173),V=n(58),D=n(53),I=n(174),T=n(175),P=n(176),O=n(32),$=n(177),E=Object(c.a)(u,r,[],!1,null,null,null);f()(E,{VApp:p.a,VAutocomplete:v.a,VBtn:h.a,VCard:g.a,VCardActions:b.a,VCheckbox:y.a,VCol:_.a,VContainer:w.a,VDatePicker:k.a,VDialog:F.a,VForm:C.a,VIcon:S.a,VLayout:x.a,VMenu:V.a,VProgressCircular:D.a,VRow:I.a,VSnackbar:T.a,VSpacer:P.a,VTextField:O.a,VTextarea:$.a}),E.options.__file="src/components/app.vue";var q=E.exports,L=n(157);o.a.use(L.a);var N=new L.a.Store({state:{},mutations:{},getters:{}});t.default=function(){widget.addEvent("onLoad",(function(){a.b.disableCSS(!0),window.title="KEONYS",widget.setTitle(window.title),new o.a({store:N,vuetify:s,render:function(e){return e(q)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){l.$emit("reloadwidget")})),widget.addEvent("OnEventCountChanged",(function(e,t){l.$emit("OnEventCountChanged",e,t)})),widget.addEvent("onSearch",(function(e){l.$emit("onSearch",e)})),widget.addEvent("onResetSearch",(function(){l.$emit("onSearch","")}))}},79:function(e,t,n){"use strict";var a=n(23);n.n(a).a},80:function(e,t,n){(e.exports=n(4)(!1)).push([e.i,"\nhtml, body {\r\n    overflow-y: auto !important;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color:#ffffff;\n}\n.dialog.centered-dialog,\r\n.v-dialog.centered-dialog\r\n{\r\n    background: whitesmoke;\r\n    box-shadow: none;\r\n    border-radius: 6px;\r\n    width: auto;\r\n    color: #222;\n}\r\n",""])}}]);
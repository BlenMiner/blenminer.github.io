(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{17:function(e,t,n){var o=n(58);"string"==typeof o&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};n(14)(o,r);o.locals&&(e.exports=o.locals)},21:function(e,t,n){var o=n(68);"string"==typeof o&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};n(14)(o,r);o.locals&&(e.exports=o.locals)},3:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(4),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("loading",{attrs:{value:e.loading,message:"Loading",progresscolor:"#005685"}}),e._v(" "),n("v-snackbar",{attrs:{absolute:"",top:"",right:"",color:"success"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[n("span",[e._v("Post successful!")]),e._v(" "),n("v-icon",{attrs:{dark:""}},[e._v("\n            mdi-checkbox-marked-circle\n        ")])],1),e._v(" "),n("v-snackbar",{attrs:{absolute:"",top:"",right:"",color:"error"},model:{value:e.snackbarerror,callback:function(t){e.snackbarerror=t},expression:"snackbarerror"}},[n("span",[e._v("Post failed")]),e._v(" "),n("v-icon",{attrs:{dark:""}},[e._v("\n            mdi-minus-box\n        ")])],1),e._v(" "),n("v-card",{attrs:{flat:""}},[n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.rules.requiredstr,color:"purple darken-2",label:"Société",required:"",outlined:"",dense:""},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.rules.requiredstr,color:"blue darken-2",label:"Equipe Commerciale",required:"",outlined:"",dense:""},model:{value:e.form.commercialTeam,callback:function(t){e.$set(e.form,"commercialTeam",t)},expression:"form.commercialTeam"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[n("v-textarea",{attrs:{rules:e.rules.requiredstr,color:"teal",required:"",outlined:"",rows:"3",placeholder:"<Activités, localisation, secteur(s) d’activité, industrie, etc.>"},scopedSlots:e._u([{key:"label",fn:function(){return[n("div",[e._v("\n                            Présentation société\n                        ")])]},proxy:!0}]),model:{value:e.form.presentCompany,callback:function(t){e.$set(e.form,"presentCompany",t)},expression:"form.presentCompany"}})],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[n("v-textarea",{attrs:{rules:e.rules.requiredstr,color:"teal",required:"",outlined:"",rows:"3",placeholder:"< Business drivers, challenges, objectifs ciblés, processus ciblés à transformer, ISE, IPE, domaines fonctionnels, Brand(s), nombre d’utilisateurs, Cloud ou On Premise >"},scopedSlots:e._u([{key:"label",fn:function(){return[n("div",[e._v("\n                            Contexte Projet/Opportunité\n                        ")])]},proxy:!0}]),model:{value:e.form.opportunity,callback:function(t){e.$set(e.form,"opportunity",t)},expression:"form.opportunity"}})],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{rounded:"",width:"45%",color:"red",dark:""},on:{click:e.resetForm}},[e._v("\n                    Reset Form\n                ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{disabled:!e.formIsValid,color:"primary",type:"submit",rounded:"",width:"45%"}},[e._v("\n                    Post Form\n                ")])],1)],1)],1)],1)};a._withStripped=!0;var i=n(117);n(39),n(46);r.a.use(i.a);var s=new r.a,l=new i.a({icons:{iconfont:"mdi"}});var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticStyle:{position:"absolute"},attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[n("v-progress-circular",{attrs:{indeterminate:"",size:70,width:7,color:e.progresscolor}}),e._v(" "),null!=e.message?n("h1",[e._v(e._s(e.message))]):e._e()],1)],1)],1)],1)};c._withStripped=!0;var u={name:"Loading",props:{value:{type:Boolean,default:!1},message:{type:String,default:null},progresscolor:{type:String,default:"purple"}},data:function(){return{}}},d=(n(57),n(25)),m=n(26),p=n.n(m),f=n(108),v=n(118),h=n(109),g=n(28),b=n(110),y=Object(d.a)(u,c,[],!1,null,null,null);function w(e,t){requirejs(["DS/WAFData/WAFData"],(function(n){n.authenticatedRequest(e,t)}))}p()(y,{VContainer:f.a,VDialog:v.a,VLayout:h.a,VProgressCircular:g.a,VRow:b.a}),y.options.__file="src/components/loading.vue";var _={name:"App",components:{loading:y.exports},data:function(){var e=Object.freeze({company:"",commercialTeam:"",presentCompany:"",opportunity:""});return{search:null,msg:"[NULL]",loading:!1,snackbar:!1,snackbarerror:!1,tenantId:0,tenants:[],communityId:"",form:Object.assign({},e),rules:{requiredstr:[function(e){return(e||"").length>0||"This field is required"}]},defaultForm:e}},computed:{message:function(){return this.$store.state.message},formIsValid:function(){return this.form.company&&this.form.commercialTeam&&this.form.presentCompany&&this.form.opportunity}},mounted:function(){var e=this,t=this;widget.name="",s.$on("onSearch",(function(e){t.search=e})),s.$on("reloadwidget",(function(){t.reload()})),t.loading=!0,void 0===widget.id?setTimeout((function(){t.tenantDataLoaded([{id:-1}])}),1e3):requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(t){t.getPlatformServices({platformId:void 0,onComplete:e.tenantDataLoaded})}))},methods:{resetForm:function(){this.form=Object.assign({},this.defaultForm),this.$refs.form.reset()},submit:function(){window.scrollTo({top:0,left:0,behavior:"smooth"}),this.swymAddPost(this.communityId,"Speed Dating Card",'<p>\n            <span style="text-decoration:underline;"><strong>'.concat(this.form.company,"</strong> - ").concat(this.form.commercialTeam,"</span>\n            </p>\n            <p>\n                <h3>Présentation société</h3>\n                <br/>\n                ").concat(this.form.presentCompany," \n            </p>\n            <p> \n                <h3>Contexte Projet/Opportunité </h3>\n                <br/>\n                ").concat(this.form.opportunity,"\n            </p>"),1),this.resetForm()},tenantDataLoaded:function(e){this.tenants=[];for(var t=[],n=0,o=0;o<e.length;o++)void 0!==e[o]["3DSwym"]&&(t.push({value:"".concat(n++),label:"".concat(e[o].platformId," - ").concat(e[o].displayName)}),this.tenants.push(e[o]));widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:t}),s.$emit("reloadwidget")},swymCommunities:function(e){if(void 0!==widget.id){var t=this.tenants[this.tenantId]["3DSwym"];w(t+"/api/index/tk",{method:"GET",onComplete:function(n){var o=JSON.parse(n).result.ServerToken;w(t+"/api/community/listmycommunities/creation_granted_for/post",{method:"GET",headers:{"X-DS-SWYM-CSRFTOKEN":o},onComplete:function(t){var n=JSON.parse(t);e(n)},onFailure:function(e){console.error(e)}})},onFailure:function(e){console.error(e)}})}else e({result:[{id:"1245152",title:"hello"},{id:"1291515",title:"world"}]})},swymAddPost:function(e,t,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0!==widget.id){var a=this,i=a.tenants[a.tenantId]["3DSwym"];w(i+"/api/index/tk",{method:"GET",onComplete:function(a){var s=JSON.parse(a).result.ServerToken,l={title:t,community_id:e,message:n,published:r.toString()};w(i+"/api/post/add",{method:"POST",headers:{"X-DS-SWYM-CSRFTOKEN":s,"Content-type":"application/json; charset=UTF-8"},data:JSON.stringify({params:l}),onComplete:function(e){o.snackbar=!0},onFailure:function(e){o.snackbarerror=!0}})},onFailure:function(e){console.error(e)}})}},reload:function(){var e=this;e.tenantId=widget.getValue("_CurrentTenantID_"),e.communityId=widget.getValue("_ComunityId_"),e.loading=!0,e.swymCommunities((function(t){for(var n=[],o=0;o<t.result.length;++o)n.push({value:"".concat(t.result[o].id),label:"".concat(t.result[o].title)});widget.addPreference({name:"_ComunityId_",type:"list",label:"Community",defaultValue:0==n.length?"0":n[0].value,options:n}),e.loading=!1}))}}},S=(n(67),n(111)),k=n(119),C=n(33),x=n(34),T=n(112),V=n(113),D=n(35),F=n(114),I=n(115),O=n(98),P=n(116),E=Object(d.a)(_,a,[],!1,null,null,null);p()(E,{VApp:S.a,VBtn:k.a,VCard:C.a,VCardActions:x.a,VCol:T.a,VContainer:f.a,VForm:V.a,VIcon:D.a,VRow:b.a,VSnackbar:F.a,VSpacer:I.a,VTextField:O.a,VTextarea:P.a}),E.options.__file="src/components/app.vue";var $=E.exports,q=n(97);r.a.use(q.a);var j=new q.a.Store({state:{},mutations:{},getters:{}});t.default=function(){widget.addEvent("onLoad",(function(){o.b.disableCSS(!0),window.title="KEONYS",widget.setTitle(window.title),new r.a({store:j,vuetify:l,render:function(e){return e($)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){s.$emit("reloadwidget")})),widget.addEvent("onSearch",(function(e){s.$emit("onSearch",e)})),widget.addEvent("onResetSearch",(function(){s.$emit("onSearch","")}))}},57:function(e,t,n){"use strict";var o=n(17);n.n(o).a},58:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,"\n.dialog.centered-dialog,\r\n.v-dialog.centered-dialog\r\n{\r\n    background: whitesmoke;\r\n    box-shadow: none;\r\n    border-radius: 6px;\r\n    width: auto;\r\n    color: #222;\n}\r\n",""])},67:function(e,t,n){"use strict";var o=n(21);n.n(o).a},68:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,"\nhtml, body {\r\n    overflow-y: auto !important;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color:#ffffff;\n}\n.loading-dialog {\r\n   background-color: #303030;\n}\r\n",""])}}]);
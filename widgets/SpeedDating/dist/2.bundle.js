(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{14:function(t,e,n){"use strict";(function(t){var r=n(15),o=n(72);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){requirejs(["DS/WAFData/WAFData"],(function(n){n.authenticatedRequest(t,e)}))}e.a={name:"App",components:{loading:o.a},data:function(){return{search:null,msg:"[NULL]",loading:!1,tenantId:0,tenants:[],communityId:""}},computed:{message:function(){return this.$store.state.message}},mounted:function(){var t=this,e=this;widget.name="",r.a.$on("onSearch",(function(t){e.search=t})),r.a.$on("reloadwidget",(function(){e.reload()})),e.loading=!0,void 0===widget.id?setTimeout((function(){e.tenantDataLoaded([{id:-1}])}),1e3):requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(e){e.getPlatformServices({platformId:void 0,onComplete:t.tenantDataLoaded})}))},methods:{tenantDataLoaded:function(t){this.tenants=[];for(var e=[],n=0,o=0;o<t.length;o++)void 0!==t[o]["3DSwym"]&&(e.push({value:"".concat(n++),label:"".concat(t[o].platformId," - ").concat(t[o].displayName)}),this.tenants.push(t[o]));widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:e}),r.a.$emit("reloadwidget")},swymCommunities:function(t){if(void 0!==widget.id){var e=this.tenants[this.tenantId]["3DSwym"];u(e+"/api/index/tk",{method:"GET",onComplete:function(n){var r=JSON.parse(n).result.ServerToken;u(e+"/api/community/listmycommunities/creation_granted_for/post",{method:"GET",headers:{"X-DS-SWYM-CSRFTOKEN":r},onComplete:function(e){var n=JSON.parse(e);t(n)},onFailure:function(t){console.error(t)}})},onFailure:function(t){console.error(t)}})}else t({result:[{id:"1245152",title:"hello"},{id:"1291515",title:"world"}]})},swymAddPost:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0!==widget.id){var o=this,a=o.tenants[o.tenantId]["3DSwym"];u(a+"/api/index/tk",{method:"GET",onComplete:function(i){var s=JSON.parse(i).result.ServerToken,c={title:e,community_id:t,message:n,published:r.toString()};o.swymPost(s,a+"/api/post/add",c)},onFailure:function(t){console.error(t)}})}},doHttp:function(e){var n,r,o,a,s,u,l,d;return regeneratorRuntime.async((function(p){for(;;)switch(p.prev=p.next){case 0:return void 0===(n=e.followRedirect)&&(n=!1),(r=e.url).startsWith("http:")||r.startsWith("https:")||(r=this.baseurl+r),o=e.headers||{},a="","GET"===e.method?(-1===r.indexOf("?")?r+="?":r+="&",r+=querystring.stringify(e.data)):(e.data instanceof FormData?(s=e.data,o["Content-Type"]=s.getHeaders()["content-type"],a=s.getBuffer()):o["Content-Type"]&&""!==o["Content-Type"]?a="object"!==c(e.data)||e.data instanceof t?e.data:JSON.stringify(e.data):(o["Content-Type"]="application/x-www-form-urlencoded",a=querystring.stringify(e.data)),o["Content-Length"]=t.byteLength(a)),p.prev=7,u=new URL(r),l=i({},this.reqOpts,{method:e.method,protocol:u.protocol,hostname:u.hostname,path:u.pathname+u.search,headers:o}),p.next=12,regeneratorRuntime.awrap(this.promiseRequest(l,a));case 12:if(d=p.sent,this.trace("".concat(e.method," ").concat(e.url," (").concat(d.statusCode,") => Success")),!n||302!==d.statusCode){p.next=20;break}return p.next=17,regeneratorRuntime.awrap(this.doHttp(i({},e,{url:d.headers.location})));case 17:return p.abrupt("return",p.sent);case 20:return p.abrupt("return",d);case 21:p.next=27;break;case 23:throw p.prev=23,p.t0=p.catch(7),this.trace("".concat(e.method," ").concat(e.url," => ").concat(p.t0.message)),p.t0;case 27:case"end":return p.stop()}}),null,this,[[7,23]])},request:function(t,e,n,r,o){return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.doHttp({method:t,url:e,data:n,headers:r,followRedirect:o}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),null,this)},swymPost:function(t,e,n){var r,o;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.request("POST",e,{params:n},{"Content-Type":"application/json","X-DS-SWYM-CSRFTOKEN":t}));case 2:if(r=a.sent,o=JSON.parse(r.content),200!==r.statusCode){a.next=8;break}return a.abrupt("return",o);case 8:throw new Error(o.errorcode+": "+o.errormsg);case 9:case"end":return a.stop()}}),null,this)},reload:function(){var t=this;t.tenantId=widget.getValue("_CurrentTenantID_"),t.communityId=widget.getValue("_ComunityId_"),t.loading=!0,t.swymCommunities((function(e){for(var n=[],r=0;r<e.result.length;++r)n.push({value:"".concat(e.result[r].id),label:"".concat(e.result[r].title)});widget.addPreference({name:"_ComunityId_",type:"list",label:"Community",defaultValue:0==n.length?"0":n[0].value,options:n}),t.loading=!1}))}}}}).call(this,n(29).Buffer)},15:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(4),o=n(82);n(33),n(40);r.a.use(o.a);var a=new r.a;e.b=new o.a({icons:{iconfont:"mdi"}})},16:function(t,e,n){var r=n(52);"string"==typeof r&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1};n(11)(r,o);r.locals&&(t.exports=r.locals)},18:function(t,e,n){var r=n(62);"string"==typeof r&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1};n(11)(r,o);r.locals&&(t.exports=r.locals)},3:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n(4),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("loading",{attrs:{value:t.loading,message:"Loading",progresscolor:"#005685"}}),t._v(" "),n("v-btn",{on:{click:function(e){return t.swymAddPost(t.communityId,"test","body",0)}}},[t._v("Add Post")])],1)};a._withStripped=!0;var i=n(14).a,s=(n(61),n(21)),c=n(22),u=n.n(c),l=n(81),d=n(84),p=Object(s.a)(i,a,[],!1,null,null,null);u()(p,{VApp:l.a,VBtn:d.a}),p.options.__file="src/components/app.vue";var f=p.exports,m=n(15),g=n(71);o.a.use(g.a);var h=new g.a.Store({state:{},mutations:{},getters:{}});e.default=function(){widget.addEvent("onLoad",(function(){r.b.disableCSS(!0),window.title="KEONYS",widget.setTitle(window.title),new o.a({store:h,vuetify:m.b,render:function(t){return t(f)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){m.a.$emit("reloadwidget")})),widget.addEvent("onSearch",(function(t){m.a.$emit("onSearch",t)})),widget.addEvent("onResetSearch",(function(){m.a.$emit("onSearch","")}))}},51:function(t,e,n){"use strict";var r=n(16);n.n(r).a},52:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,"\n.dialog.centered-dialog,\r\n.v-dialog.centered-dialog\r\n{\r\n    background: whitesmoke;\r\n    box-shadow: none;\r\n    border-radius: 6px;\r\n    width: auto;\r\n    color: #222;\n}\r\n",""])},61:function(t,e,n){"use strict";var r=n(18);n.n(r).a},62:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,"\nhtml, body {\r\n    overflow-y: auto !important;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color:#ffffff;\n}\n.loading-dialog {\r\n   background-color: #303030;\n}\r\n",""])},72:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticStyle:{position:"absolute"},attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[n("v-progress-circular",{attrs:{indeterminate:"",size:70,width:7,color:t.progresscolor}}),t._v(" "),null!=t.message?n("h1",[t._v(t._s(t.message))]):t._e()],1)],1)],1)],1)};r._withStripped=!0;var o={name:"Loading",props:{value:{type:Boolean,default:!1},message:{type:String,default:null},progresscolor:{type:String,default:"purple"}},data:function(){return{}}},a=(n(51),n(21)),i=n(22),s=n.n(i),c=n(78),u=n(83),l=n(79),d=n(27),p=n(80),f=Object(a.a)(o,r,[],!1,null,null,null);s()(f,{VContainer:c.a,VDialog:u.a,VLayout:l.a,VProgressCircular:d.a,VRow:p.a}),f.options.__file="src/components/loading.vue";e.a=f.exports}}]);
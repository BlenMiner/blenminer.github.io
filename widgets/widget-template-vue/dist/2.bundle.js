(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{136:function(t,e,a){"use strict";var n=a(41);a.n(n).a},137:function(t,e,a){(t.exports=a(4)(!1)).push([t.i,"\nhtml, body {\r\n    overflow-y: auto !important;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color:#ffffff;\n}\r\n",""])},3:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(7),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[a("preferences",{attrs:{tabcount:t.tabCount,tabs:t.tabs}}),t._v(" "),a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",height:"10",active:t.loadingbar>0}}),t._v(" "),a("v-snackbar",{model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n            "+t._s(t.snackbarMsg)+"\n            "),a("v-btn",{attrs:{color:"grey",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n                Close\n            ")])],1),t._v(" "),a("v-list-item",{staticStyle:{padding:"0"}},[a("projectGrid",{style:"background-color:white;height: 100vh;"+(null!==t.currentProject?"max-width: 360px;":"max-width:100%;"),attrs:{projects:t.projects,selection:t.currentProject,owner:t.owner}}),t._v(" "),a("v-slide-x-transition",[a("projectView",{directives:[{name:"show",rawName:"v-show",value:null!==t.currentProject,expression:"currentProject !== null"}],staticStyle:{"max-width":"100%"},attrs:{tabcount:t.tabCount,tabs:t.myTabs,url:t.tenants&&t.tenants[t.tenantId]?"https://"+t.tenants[t.tenantId].platformId+"-"+t.enoviaUrl:"https://r1132100006595-eu1-space.3dexperience.3ds.com/enovia",objectid:t.objectid,project:t.currentProject,securitycontext:t.securityContext}})],1)],1)],1)],1)};i._withStripped=!0;var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"overflow-y-auto",staticStyle:{padding:"0"}},[a("v-row",{staticStyle:{padding:"0"},attrs:{"no-gutters":""}},[a("v-col",[a("v-row",{staticClass:"white",attrs:{align:"start",justify:"start","no-gutters":""}},t._l(t.filtertedlist(),(function(e,n){return a("v-card",{key:n,staticClass:"ma-1 pa-1",attrs:{width:"350px",height:"120px",color:t.selection==e?"grey lighten-3":"white",hover:""},on:{click:function(a){return t.select(t.selection,e)}}},[a("v-expand-x-transition",[a("v-list-item",[a("v-list-item-avatar",{attrs:{tile:"",size:"auto"}},[a("v-img",{attrs:{src:e.icon}})],1),t._v(" "),a("v-list-item-content",{staticStyle:{padding:"0"},attrs:{height:"120px"}},[a("v-list-item-title",{staticClass:"my-2",attrs:{title:e.name}},[t._v(t._s(e.name))]),t._v(" "),a("v-list-item-subtitle",{attrs:{title:e.state}},[t._v("Phase: "+t._s(e.state))]),t._v(" "),a("v-list-item-subtitle",{attrs:{title:e.description}},[t._v("Desc: "+t._s(e.description))]),t._v(" "),a("v-list-item-subtitle",{attrs:{title:t.owner}},[t._v("Owner: "+t._s(e.owner))]),t._v(" "),-1!==e.progress?a("v-progress-linear",{staticClass:"my-2",attrs:{value:e.progress,title:e.progress,indeterminate:!e.progress,height:"8px"}}):t._e()],1)],1)],1)],1)})),1)],1)],1)],1)};o._withStripped=!0;var s=a(162);a(58),a(65);r.a.use(s.a);var c=new r.a,l=new s.a({icons:{iconfont:"mdi"}}),u={props:{projects:Object,selection:Object,owner:String},data:function(){return{searchtext:""}},mounted:function(){var t=this;c.$on("search",(function(e){t.searchtext=e.toLowerCase()}))},methods:{select:function(t,e){t!==e&&c.$emit("selection_project",e)},filtertedlist:function(){if(""===this.searchtext)return this.projects;for(var t=[],e=0;e<this.projects.length;e++)-1!==this.projects[e].name.toLowerCase().indexOf(this.searchtext)&&t.push(this.projects[e]);return t}}},d=a(20),b=a(21),v=a.n(b),p=a(44),g=a(154),m=a(167),_=a(15),f=a(143),h=a(38),w=a(54),x=a(14),y=a(46),j=a(155),V=Object(d.a)(u,o,[],!1,null,null,null);v()(V,{VCard:p.a,VCol:g.a,VContainer:m.a,VExpandXTransition:_.b,VImg:f.a,VListItem:h.a,VListItemAvatar:w.a,VListItemContent:x.a,VListItemSubtitle:x.b,VListItemTitle:x.c,VProgressLinear:y.a,VRow:j.a}),V.options.__file="src/components/project-grid.vue";var C=V.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticStyle:{width:"100%",padding:"0",height:"100vh"},attrs:{flat:""}},[a("v-progress-linear",{attrs:{color:"cyan accent-4",indeterminate:"",height:"5",active:t.loadingbar}}),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.back()}}},[a("v-icon",[t._v("mdi-forwardburger")])],1),t._v(" "),a("b",[t._v(t._s(t.project?t.project.name:"Loading..."))]),t._v(" "),a("v-btn",{staticStyle:{float:"right"},attrs:{text:""},on:{click:function(e){return t.settings()}}},[a("v-icon",[t._v("mdi-settings")])],1),t._v(" "),a("v-tabs",{attrs:{"background-color":"#005685",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabcount,(function(e){return a("v-tab",{key:e},[t._v("\n            "+t._s(t.tabs[e-1]?t.tabs[e-1].name:"Loading ...")+"\n        ")])})),1),t._v(" "),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabcount,(function(e){return a("v-tab-item",{key:e},[null==t.tabs[e-1]||t.tabs[e-1].openNewTab?a("v-card",{staticStyle:{height:"calc(100vh - 90.51px)"}},[a("a",{attrs:{target:"_blank",href:t.tabs[e-1]?t.url+t.tabs[e-1].url.replace(/{id}/g,t.objectid).replace(/{context}/g,t.securitycontext):"about:blank"},on:{click:function(e){t.loadingbar=!1}}},[t._v("Open in Enovia")])]):a("v-card",{attrs:{flat:""}},[null!==t.project?a("iframe",{ref:"iframes",refInFor:!0,staticStyle:{height:"calc(100vh - 90.51px)"},attrs:{src:t.tabs[e-1]?t.url+t.tabs[e-1].url.replace(/{id}/g,t.objectid).replace(/{context}/g,t.securitycontext):"about:blank",width:"100%"},on:{load:function(e){return t.doneLoading()}}}):t._e()])],1)})),1)],1)};T._withStripped=!0;var S={props:{project:Object,tabs:Array,url:String,objectid:String,tabcount:Number,securitycontext:String},data:function(){return{tab:null,loadingbar:!0}},mounted:function(){var t=this;c.$on("selection_project",(function(){t.loadingbar=!0}))},methods:{back:function(){c.$emit("removeProjectSelection")},doneLoading:function(){this.loadingbar=!1},settings:function(){c.$emit("editPrefs",this.tabcount)}}},k=a(55),P=a(49),N=a(156),I=a(168),$=a(164),U=a(144),D=Object(d.a)(S,T,[],!1,null,null,null);v()(D,{VBtn:k.a,VCard:p.a,VIcon:P.a,VProgressLinear:y.a,VTab:N.a,VTabItem:I.a,VTabs:$.a,VTabsItems:U.a}),D.options.__file="src/components/project-view.vue";var L=D.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"80%"},on:{"click:outside":function(e){return t.savesettings(t.tabcount)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{"min-height":"90vh"}},[a("v-dialog",{attrs:{"max-width":"700px"},model:{value:t.infodialog,callback:function(e){t.infodialog=e},expression:"infodialog"}},[a("v-toolbar",{staticStyle:{"background-color":"#005685"},attrs:{dark:"",flat:""}},[a("v-toolbar-title",[t._v("URL Presets")])],1),t._v(" "),a("v-card",{attrs:{tile:""}},t._l(t.tabs,(function(e,n){return a("v-content",{key:n,staticClass:"pa-5"},[a("h3",[t._v(t._s(e.name))]),t._v("\n                    "+t._s(e.url)+"\n                ")])})),1)],1),t._v(" "),a("v-toolbar",{staticStyle:{"background-color":"#005685"},attrs:{dark:"",flat:""}},[a("v-toolbar-title",[t._v("Tab settings")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.infodialog=!0}}},[a("v-icon",[t._v("mdi-information")])],1)],1),t._v(" "),a("v-card-text",[a("br"),t._v(" "),a("v-form",[a("b",[t._v("{id}")]),t._v(" gets replaced by the project's ID"),a("br"),t._v(" "),a("b",[t._v("{context}")]),t._v(" gets replaced by security context"),a("br"),t._v(" "),t._l(t.tabcount,(function(e){return[a("v-card",{key:e+"_card",staticClass:"my-2",staticStyle:{cursor:"default"},attrs:{hover:""}},[a("v-card-actions",[a("h3",[t._v("Tab "+t._s(e)+":")]),t._v(" "),a("v-spacer"),t._v(" "),t.tabcount<10?a("v-btn",{attrs:{icon:"",color:"success"},on:{click:function(a){t.insert(e-1,t.tabcount)}}},[a("v-icon",[t._v("mdi-plus")])],1):t._e(),t._v(" "),t.tabcount>1?a("v-btn",{attrs:{icon:"",color:"error"},on:{click:function(a){t.remove(e-1,t.tabcount)}}},[a("v-icon",[t._v("mdi-delete")])],1):t._e()],1),t._v(" "),a("v-card-text",[a("v-text-field",{key:e+"_name",attrs:{label:"Tab "+e+": Name",name:"tabname"},model:{value:t.tabNames[e-1],callback:function(a){t.$set(t.tabNames,e-1,a)},expression:"tabNames[i - 1]"}}),t._v(" "),a("v-text-field",{key:e+"_url",attrs:{label:"Tab "+e+": Url",title:"{id}= project's ID; {context} = security context;",name:"taburl"},model:{value:t.tabUrls[e-1],callback:function(a){t.$set(t.tabUrls,e-1,a)},expression:"tabUrls[i - 1]"}}),t._v(" "),a("v-switch",{attrs:{label:"Open As New Window"},model:{value:t.tabOutside[e-1],callback:function(a){t.$set(t.tabOutside,e-1,a)},expression:"tabOutside[i - 1]"}})],1)],1)]})),t._v(" "),a("v-btn",{attrs:{color:"success"},on:{click:function(e){return t.insert(t.tabcount,t.tabcount)}}},[a("v-icon",[t._v("mdi-plus")]),t._v(" Add new tab")],1)],2)],1)],1)],1)};O._withStripped=!0;var A={props:{tabcount:Number,tabs:Array},data:function(){return{dialog:!1,infodialog:!1,tabNames:[],tabUrls:[],tabOutside:[]}},mounted:function(){var t=this;c.$on("editPrefs",(function(e){t.dialog=!0;for(var a=0;a<e;a++)t.tabNames[a]=widget.getValue("_Tab".concat(a,"_Name_"))||"New tab "+(a+1),t.tabUrls[a]=widget.getValue("_Tab".concat(a,"_Url_"))||"/programcentral/ProgramCentralExecutionStatusReport.jsp?objectId={id}",t.tabOutside[a]=widget.getValue("_Tab".concat(a,"_NewTab_"))||!1}))},methods:{savesettings:function(t){var e=!1;if(widget.id)for(var a=0;a<t;a++)widget.getValue("_Tab".concat(a,"_Name_"))===this.tabNames[a]&&widget.getValue("_Tab".concat(a,"_Url_"))===this.tabUrls[a]&&widget.getValue("_Tab".concat(a,"_NewTab_"))===this.tabOutside[a]||(widget.setValue("_Tab".concat(a,"_Name_"),this.tabNames[a]),widget.setValue("_Tab".concat(a,"_Url_"),this.tabUrls[a]),widget.setValue("_Tab".concat(a,"_NewTab_"),this.tabOutside[a]),e=!0);this.dialog=!1,e&&c.$emit("myTabsUpdated")},changeTabCount:function(t){c.$emit("change_tab_count",t)},remove:function(t,e){for(var a=t;a<e-1;a++)this.tabNames[a]=this.tabNames[a+1],this.tabUrls[a]=this.tabUrls[a+1];this.changeTabCount(e-1)},insert:function(t,e){for(var a=e-1;a>=t;a--)this.tabNames[a+1]=this.tabNames[a],this.tabUrls[a+1]=this.tabUrls[a];this.tabNames[t]="New tab "+(t+1),this.tabUrls[t]=widget.getValue("_Tab".concat(t+1,"_Url_")),this.changeTabCount(e+1)}}},E=a(18),R=a(157),B=a(163),F=a(158),M=a(159),W=a(165),G=a(166),J=a(52),X=a(53),q=Object(d.a)(A,O,[],!1,null,null,null);function z(t,e){requirejs(["DS/WAFData/WAFData"],(function(a){a.authenticatedRequest(t,e)}))}v()(q,{VBtn:k.a,VCard:p.a,VCardActions:E.a,VCardText:E.b,VContent:R.a,VDialog:B.a,VForm:F.a,VIcon:P.a,VSpacer:M.a,VSwitch:W.a,VTextField:G.a,VToolbar:J.a,VToolbarTitle:X.a}),q.options.__file="src/components/preferences.vue";var H={name:"App",components:{projectGrid:C,projectView:L,preferences:q.exports},data:function(){return{snackbar:!1,snackbarMsg:"Bro",tenants:[],tenantId:0,loadingbar:0,objectid:"",currentProject:null,tabCount:4,owner:"Loading ...",enoviaUrl:"https://r1132100006595-eu1-space.3dexperience.3ds.com/enovia",projects:{C745A4D6DB8A000080B84F5E43A50500:{id:"C745A4D6DB8A000080B84F5E43A50500",name:"Project Purple Planet",description:"efe",deadline:"20/09/1997",icon:"https://R1132100006595-eu1-space.3dexperience.3ds.com/enovia/snresources/images/icons/small/I_ProjectSpace.png",progress:"50.2",state:"Active",owner:"Me :D"},pfft:{id:"pfft",name:"Project Red Planet",description:"fef",deadline:"20/09/1997",icon:"https://R1132100006595-eu1-space.3dexperience.3ds.com/enovia/snresources/images/icons/small/I_ProjectSpace.png",progress:"5",state:"Create",owner:"Me :D"}},tabs:[{name:"Schedule Status",url:"/programcentral/ProgramCentralExecutionStatusReport.jsp?objectId={id}&SecurityContext={context}"},{name:"Bussiness Status",url:"/programcentral/ProgramCentralBusinessStatusReport.jsp?objectId={id}&SecurityContext={context}"},{name:"Gantt",url:"/webapps/ENOGantt/gantt-widget.html?objectId={id}&SecurityContext={context}"}],myTabs:[],securityContext:""}},computed:{message:function(){return this.$store.state.message}},watch:{},mounted:function(){var t=this,e=this;c.$on("change_tab_count",(function(t){widget.setValue("_TabCount_",t),e.tabCount=t})),c.$on("toast",(function(t){e.toast(t)})),c.$on("selection_project",(function(t){e.objectid=t.id,e.currentProject=t})),c.$on("removeProjectSelection",(function(t){e.currentProject=null,e.objectid=""})),c.$on("myTabsUpdated",(function(t){e.myTabs=[];for(var a=0;a<e.tabCount;a++)e.myTabs[a]={name:widget.getValue("_Tab".concat(a,"_Name_")),url:widget.getValue("_Tab".concat(a,"_Url_")),openNewTab:widget.getValue("_Tab".concat(a,"_NewTab_"))};e.$forceUpdate()})),c.$on("reloadwidget",(function(t){e.tenantId=widget.getValue("_CurrentTenantID_"),e.enoviaUrl=widget.getValue("_Enovia_"),e.tabCount=parseInt(widget.getValue("_TabCount_"),10),e.securityContext=widget.getValue("_CurrentSecurityContext_"),widget.setTitle(widget.getValue("_Title_")),window.title=widget.getValue("_Title_"),c.$emit("myTabsUpdated"),e.retrieveSecurityContexts()})),void 0===widget.id?(setTimeout((function(){e.tenantDataLoaded([{id:-1}])}),2e3),this.myTabs=this.tabs):(this.projects={},requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(e){e.getPlatformServices({platformId:void 0,onComplete:t.tenantDataLoaded})})))},methods:{toast:function(t){this.snackbarMsg=t,this.snackbar=!0},tenantDataLoaded:function(t){this.tenants=[];for(var e=[],a=0,n=0;n<t.length;n++)void 0!==t[n]["3DSpace"]&&(e.push({value:"".concat(a++),label:"".concat(t[n].platformId," - ").concat(t[n].displayName)}),this.tenants.push(t[n]));widget.addPreference({name:"_Title_",type:"text",label:"Widget Title",defaultValue:"Widget Project Management"}),widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:e}),widget.addPreference({name:"_Enovia_",type:"text",label:"Enovia URL",defaultValue:"eu1-space.3dexperience.3ds.com/enovia"}),widget.addPreference({name:"_TabCount_",type:"hidden",label:"Tab Count",defaultValue:"2",step:"1",min:"1",max:"10"}),widget.addPreference({name:"_CurrentSecurityContext_",type:"list",label:"Security Context",defaultValue:"",options:[{value:"",label:"None"}]});for(var r=0;r<10;r++)widget.addPreference({name:"_Tab".concat(r,"_Name_"),type:"hidden",defaultValue:"New tab "+(r+1)}),widget.addPreference({name:"_Tab".concat(r,"_Url_"),type:"hidden",defaultValue:this.tabs[r>this.tabs.length-1?this.tabs.length-1:r].url}),widget.addPreference({name:"_Tab".concat(r,"_NewTab_"),type:"hidden",defaultValue:!1});void 0!==widget.id?c.$emit("reloadwidget"):this.loadingbar=0},retrieveAllProjects:function(){var t=this,e=this;this.loadingbar+=2;var a=this.tenants[this.tenantId]["3DSpace"];e.projects={},z(a+"/resources/e6w/service/json/PRG_Experience_MyProjects_List?SecurityContext=".concat(this.securityContext),{onComplete:function(a){e.loadingbar=0;var n=JSON.parse(a).widget;if(void 0!==n)for(var r=n.datarecords.datagroups,i=0;i<r.length;i++){var o=r[i].physicalId,s=r[i].dataelements;e.$set(t.projects,o,{id:o,name:s.name.value[0].value,description:s.desc.value[0].value,icon:s.image.value[0].imageValue,progress:s.percentComplete.value[0].value,state:0!==s.phase.value.length?s.phase.value[0].value:"",owner:s.owner.value[0].value,type:"Project Space"})}else e.loadingbar=0},onFailure:function(t){e.loadingbar=0}})},retrieveSecurityContexts:function(){var t=this,e=this;this.loadingbar++,z(this.tenants[this.tenantId]["3DSpace"]+"/resources/modeler/pno/person?&current=true&select=collabspaces&select=firstname&select=lastname",{onComplete:function(a){e.projects=[];var n=JSON.parse(a),r=[];r.push({value:"",label:"None"}),e.owner=n.firstname+" "+n.lastname;for(var i=0;i<n.collabspaces.length;i++)for(var o=n.collabspaces[i],s=n.collabspaces[i].name,c=0;c<o.couples.length;c++){var l=o.couples[c],u=l.organization.name,d="ctx::"+l.role.name+"."+u+"."+s,b=l.role.nls+"."+u+"."+s;r.push({value:d,label:b})}widget.addPreference({name:"_CurrentSecurityContext_",type:"list",label:"Security Context",defaultValue:r[0],options:r}),e.securityContext=widget.getValue("_CurrentSecurityContext_"),t.loadingbar--,e.retrieveAllProjects()},onFailure:function(a){t.loadingbar--,e.retrieveAllProjects()}})}}},K=(a(136),a(160)),Q=a(161),Y=Object(d.a)(H,i,[],!1,null,null,null);v()(Y,{VApp:K.a,VBtn:k.a,VContent:R.a,VListItem:h.a,VProgressLinear:y.a,VSlideXTransition:_.e,VSnackbar:Q.a}),Y.options.__file="src/components/app.vue";var Z=Y.exports,tt=a(142);r.a.use(tt.a);var et=new tt.a.Store({state:{},mutations:{},getters:{}});e.default=function(){widget.addEvent("onLoad",(function(){n.b.disableCSS(!0),window.title="Widget Project Management",widget.setTitle(window.title),new r.a({store:et,vuetify:l,render:function(t){return t(Z)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){c.$emit("reloadwidget")})),widget.addEvent("onSearch",(function(t){c.$emit("search",t)})),widget.addEvent("onResetSearch",(function(){c.$emit("search","")}))}},41:function(t,e,a){var n=a(137);"string"==typeof n&&(n=[[t.i,n,""]]);var r={insert:"head",singleton:!1};a(32)(n,r);n.locals&&(t.exports=n.locals)}}]);
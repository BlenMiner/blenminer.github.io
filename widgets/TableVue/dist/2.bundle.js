(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{3:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(7),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-content",[a("preferences"),e._v(" "),a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",height:"10",active:e.loadingbar,absolute:"",app:""}}),e._v(" "),a("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n            "+e._s(e.snackbarMsg)+"\n            "),a("v-btn",{attrs:{color:"grey",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n                Close\n            ")])],1),e._v(" "),a("v-slide-x-transition",[""===e.fileId?a("center",[a("v-content",{staticStyle:{height:"100vh",width:"100%"}},[a("div",{ref:"drop",attrs:{id:"drop",width:"90vh",height:"90vh"}})])],1):a("v-content",[a("v-card",{attrs:{height:"100vh"}},[a("v-card-title",[e._v("\n                        Tablue Vue\n                        "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,height:"calc(100vh - 60px)","multi-sort":"",loading:"true"}})],1)],1)],1)],1)],1)};r._withStripped=!0;var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"80%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{"min-height":"90vh"}},[a("v-toolbar",{staticStyle:{"background-color":"#005685"},attrs:{dark:"",flat:""}},[a("v-toolbar-title",[e._v("Tab settings")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("mdi-information")])],1)],1),e._v(" "),a("v-card-text",[e._v("\n            Some text\n        ")])],1)],1)};i._withStripped=!0;var s={props:{},data:function(){return{dialog:!1}},mounted:function(){},methods:{}},l=a(31),d=a(32),c=a.n(d),u=a(52),p=a(34),f=a(19),v=a(163),g=a(47),h=a(158),b=a(51),m=a(48),w=Object(l.a)(s,i,[],!1,null,null,null);c()(w,{VBtn:u.a,VCard:p.a,VCardText:f.a,VDialog:v.a,VIcon:g.a,VSpacer:h.a,VToolbar:b.a,VToolbarTitle:m.a}),w.options.__file="src/components/preferences.vue";var _=w.exports,D=a(162);a(83),a(90);o.a.use(D.a);var S=new o.a,k=new D.a({icons:{iconfont:"mdi"}});function V(e,t){requirejs(["DS/WAFData/WAFData"],(function(a){a.authenticatedRequest(e,t)}))}var x={name:"App",components:{preferences:_},data:function(){return{loadingbar:!0,sampleText:"",search:"",snackbarMsg:"",snackbar:!1,fileId:"",tenantId:-1,tenants:[],headers:[],items:[]}},computed:{message:function(){return this.$store.state.message}},mounted:function(){var e=this,t=this;t.loadingbar=!0,S.$on("reloadwidget",(function(){t.reload()})),void 0===widget.id?setTimeout((function(){t.tenantDataLoaded([{id:-1}])}),2e3):(this.projects={},requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(t){t.getPlatformServices({platformId:void 0,onComplete:e.tenantDataLoaded})})),t.$refs.drop&&requirejs(["DS/DataDragAndDrop/DataDragAndDrop"],(function(e){e.droppable(t.$refs.drop,{drop:function(e,a,n){t.objectDroped(e,a,n)}})})))},methods:{log:function(e){this.snackbarMsg=e,this.snackbar=!0},getCSRF:function(e,t){var a=this;V(a.tenants[a.tenantId]["3DSpace"]+"/resources/v1/application/CSRF",{onComplete:function(t){var a=JSON.parse(t);e(a.csrf.value)},onFailure:function(e){a.log(e),t()}})},reload:function(){var e=this;if(e.loadingbar=!0,e.tenantId=widget.getValue("_CurrentTenantID_"),e.fileId=widget.getValue("_FileID_"),void 0!==widget.id){var t=e.tenants[e.tenantId]["3DSpace"];""!==e.fileId?e.getCSRF((function(a){V(t+"/resources/v1/modeler/documents/".concat(e.fileId,"/files/DownloadTicket"),{method:"PUT",headers:{ENO_CSRF_TOKEN:a},onComplete:function(t){V(JSON.parse(t).data[0].dataelements.ticketURL,{onComplete:function(t){e.displayFileData(t),e.loadingbar=!1},onFailure:function(t){e.log(t),e.loadingbar=!1}})},onFailure:function(t){e.log(t),e.loadingbar=!1}})}),(function(){e.loadingbar=!1})):e.loadingbar=!1}else e.fileId="1",e.displayFileData("test,test1,test2\n1,2,3\n4,5,6"),e.loadingbar=!1},objectDroped:function(e,t,a){var n=JSON.parse(e);"3DXContent"===n.protocol&&(this.fileId=n.data.items[0].objectId,widget.setValue("_FileID_",this.fileId))},displayFileData:function(e){var t=function(e,t){t=t||",";for(var a=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),n=[[]],o=null,r=null;o=a.exec(e);){var i=o[1];i.length&&i!==t&&n.push([]),r=o[2]?o[2].replace(new RegExp('""',"g"),'"'):o[3],n[n.length-1].push(r)}return n}(e,",");if(this.headers=[],0!==t.length){for(var a=0;a<t[0].length;a++){var n=t[0][a];this.headers.push({text:n,value:"col_".concat(a,'"')})}for(var o=1;o<t.length;o++){for(var r={},i=0;i<t[o].length;i++){var s=t[o][i];r["col_".concat(i,'"')]=s}this.items.push(r)}}},tenantDataLoaded:function(e){this.tenants=[];for(var t=[],a=0,n=0;n<e.length;n++)void 0!==e[n]["3DSpace"]&&(t.push({value:"".concat(a++),label:"".concat(e[n].platformId," - ").concat(e[n].displayName)}),this.tenants.push(e[n]));widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:t}),widget.addPreference({name:"_FileID_",type:"text",label:"File Object ID",defaultValue:""}),S.$emit("reloadwidget")}}},I=(a(98),a(159)),C=a(164),T=a(161),F=a(37),y=a(21),j=a(160),R=a(148),$=Object(l.a)(x,r,[],!1,null,null,null);c()($,{VApp:I.a,VBtn:u.a,VCard:p.a,VCardTitle:f.b,VContent:C.a,VDataTable:T.a,VProgressLinear:F.a,VSlideXTransition:y.d,VSnackbar:j.a,VSpacer:h.a,VTextField:R.a}),$.options.__file="src/components/app.vue";var E=$.exports,O=a(147);o.a.use(O.a);var L=new O.a.Store({state:{},mutations:{},getters:{}});t.default=function(){widget.addEvent("onLoad",(function(){n.b.disableCSS(!0),window.title="Tablue Vue",widget.setTitle(window.title),new o.a({store:L,vuetify:k,render:function(e){return e(E)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){S.$emit("reloadwidget")}))}},30:function(e,t,a){var n=a(99);"string"==typeof n&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};a(29)(n,o);n.locals&&(e.exports=n.locals)},98:function(e,t,a){"use strict";var n=a(30);a.n(n).a},99:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,"\nhtml, body {\n    overflow-y: auto !important;\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    background-color:#ffffff;\n}\n#drop {\n    width: 90vh;\n    height: 90vh;\n\n    border-style: dashed;\n    border-color: lightgray;\n    border-width: 4px;\n    border-radius: 20%;\n\n    background-image: url(https://blenminer.github.io/widgets/LiveTables/assets/cloud.png);\n    background-size: 60%;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-color: #f7f7f7;\n\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -ms-transform: translate(-50%, -50%);\n    transform: translate(-50%, -50%);\n}\n",""])}}]);
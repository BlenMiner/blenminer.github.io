(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{20:function(t,e,a){var s=a(71);"string"==typeof s&&(s=[[t.i,s,""]]);var r={insert:"head",singleton:!1};a(19)(s,r);s.locals&&(t.exports=s.locals)},3:function(t,e,a){"use strict";a.r(e);var s=a(0),r=a(7),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{color:"green darken-1",dark:""}},s),[t._v("\n                Load from partner\n            ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v("\n                Load From Partner\n            ")]),t._v(" "),a("v-card-text",[a("br"),t._v('\n                Select a partner and click the "Load Data" button.\n                '),a("v-overflow-btn",{staticClass:"my-2",attrs:{items:t.sortedDatabase,label:"No selection",editable:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.loadData(t.value),t.dialog=!1}}},[t._v("\n                    Load Data\n                ")])],1)],1)],1),t._v(" "),a("v-card",{attrs:{flat:""}},[a("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Category")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("Sub-Category")]),t._v(" "),a("th",{staticClass:"text-right"},[t._v("Credits")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"200"}},[t._v("Nbr Certifications")]),t._v(" "),a("th",{staticClass:"text-right"},[t._v("Total Credits")])])]),t._v(" "),a("tbody",t._l(t.databaseCategories.categories,(function(e,s){return a("tr",{key:s,style:{"background-color":t.getColor(e.color)}},[a("td",[t._v(t._s(e.category))]),t._v(" "),a("td",[t._v(t._s(e.subcategory))]),t._v(" "),a("td",{staticClass:"text-right"},[a("v-chip",{attrs:{color:"#555",dark:""}},[t._v("\n                            "+t._s(e.credits)+"\n                        ")])],1),t._v(" "),a("td",[a("v-text-field",{attrs:{label:"Outlined",placeholder:"Cert Count",rounded:"",dense:"",solo:"","single-line":"",type:"Number","hide-details":"",clearable:""},model:{value:e.count,callback:function(a){t.$set(e,"count",a)},expression:"item.count"}})],1),t._v(" "),a("td",{attrs:{width:"120"}},[a("v-chip",{staticStyle:{width:"100%"},attrs:{color:"#005685",dark:""}},[t._v("\n                        "+t._s(e.count*e.credits)+"\n                        ")])],1)])})),0)]},proxy:!0}])}),t._v(" "),a("hr"),t._v(" "),a("b",{staticStyle:{float:"right","margin-right":"60px"}},[t._v("Total: "+t._s(t.getTotalCredits()))]),t._v(" "),a("br"),t._v(" "),a("b",{staticStyle:{float:"right","margin-right":"60px"}},[t._v("Distinc Certifications: "+t._s(t.getDistinc()))])],1)],1)};i._withStripped=!0;var o=a(147);a(52),a(59);r.a.use(o.a);var n=new r.a,c=new o.a({icons:{iconfont:"mdi"}});function d(t,e){e=e||",";for(var a=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),s=[[]],r=null,i=null;r=a.exec(t);){var o=r[1];o.length&&o!==e&&s.push([]),i=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],s[s.length-1].push(i)}return s}var l={name:"App",components:{},data:function(){return{value:"",dialog:null,table:null,categories:null,tab:null,headers:[{text:"Category",value:"category"},{text:"Sub-Category",value:"subcategory"},{text:"Credits",value:"credits"},{text:"Number of Certifications",value:"count"},{text:"Total Credits",value:"count"}],database:{},sortedDatabase:[],databaseCategories:{},loadingbar:!0,snackbarMsg:"",snackbar:!1,tenantId:-1,tenants:[]}},computed:{message:function(){return this.$store.state.message}},mounted:function(){var t=this,e=this;e.loadingbar=!0,n.$on("onSearch",(function(t){e.search=t})),n.$on("reloadwidget",(function(){e.reload()})),void 0===widget.id?setTimeout((function(){e.tenantDataLoaded([{id:-1}])}),500):requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(e){e.getPlatformServices({platformId:void 0,onComplete:t.tenantDataLoaded})}))},methods:{log:function(t){this.snackbarMsg=t,this.snackbar=!0},tenantDataLoaded:function(t){this.tenants=[];for(var e=[],a=0,s=0;s<t.length;s++)void 0!==t[s]["3DSpace"]&&(e.push({value:"".concat(a++),label:"".concat(t[s].platformId," - ").concat(t[s].displayName)}),this.tenants.push(t[s]));widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:e}),n.$emit("reloadwidget")},getCSRF:function(t,e){var a,s,r=this,i=r.tenants[r.tenantId]["3DSpace"];a=i+"/resources/v1/application/CSRF",s={onComplete:function(e){var a=JSON.parse(e);t(a.csrf.value)},onFailure:function(t){r.log(t),e()}},requirejs(["DS/WAFData/WAFData"],(function(t){t.authenticatedRequest(a,s)}))},getColor:function(t){return t%2==1?"white":"#EFEFEF"},getTotalCredits:function(){if(!this.databaseCategories||!this.databaseCategories.categories)return 0;for(var t=0,e=0;e<this.databaseCategories.categories.length;++e){var a=this.databaseCategories.categories[e];t+=a.count*a.credits}return t},getDistinc:function(){if(!this.databaseCategories||!this.databaseCategories.categories)return 0;for(var t=0,e=0;e<this.databaseCategories.categories.length;++e){var a=this.databaseCategories.categories[e];t+=a.count&&0!=a?1:0}return t},loadData:function(t){for(var e=0;e<this.databaseCategories.categories.length;++e){this.databaseCategories.categories[e].count=0}if(void 0!==this.databaseCategories[t])for(var a=0;a<this.databaseCategories[t].length;++a)for(var s=this.databaseCategories[t][a],r=0;r<this.databaseCategories.categories.length;++r){var i=this.databaseCategories.categories[r];i.category==s.category&&i.subcategory==s.subcategory&&(i.count=s.count)}},addCategoryItem:function(t,e,a,s){var r=!1,i="categories"===t;if(this.databaseCategories[t]){for(var o=0;o<this.databaseCategories[t].length;++o){var n=this.databaseCategories[t][o];if(n.category===e&&n.subcategory===a)return n.count+=i?0:1,void(r=!0)}r||this.databaseCategories[t].push({category:e,subcategory:a,credits:Number(s.replace(/,/g,".")),count:i?0:1,color:0})}else console.error(t+" doesn't have other licenses?")},reload:function(){var t=this,e=new XMLHttpRequest;e.open("GET","https://bcracker.dev/widgets/database_kpi.php?key=1981qzdgq51dqzq874515ffsges487",!1),e.send(null),this.table=d(e.responseText,";"),e.open("GET","https://bcracker.dev/widgets/cert_category.php?key=1981qzdgq51dqzq874515ffsges487",!1),e.send(null),this.categories=d(e.responseText,";"),e.open("GET","https://bcracker.dev/widgets/smec.php?key=1981qzdgq51dqzq874515ffsges487",!1),e.send(null);var a=d(e.responseText,";");this.sortedDatabase.splice(0,this.sortedDatabase.length),this.database={},this.databaseCategories={};for(var s=1;s<this.table.length;s++){var i=this.table[s][0];if(i){var o=i.split("[")[1].slice(0,-1);i=i.split("[")[0].slice(0,-1);for(var n=this.table[s][7],c=!1,l="Brand_Essentials",g="Brand Articulate",u="0,5",h=1;h<this.categories.length;++h)if(this.categories[h][0]===n){l=this.categories[h][1],g=this.categories[h][2],u=this.categories[h][3],c=!0;break}void 0===this.database[i]&&(this.sortedDatabase.push(i),r.a.set(this.database,i,[]),r.a.set(this.databaseCategories,i,[])),c||console.error(n+" doesn't exist in the list.");var v={partnerId:o,certName:n,certExpiration:this.table[s][9],certProfile:this.table[s][11],certAxis:this.table[s][12],certCategory:this.table[s][13],category:l,subcategory:g,credits:u};this.database[i].push(v),this.addCategoryItem(i,l,g,u)}}r.a.set(this.databaseCategories,"categories",[]);for(var b=2;b<this.categories.length;b++){var f=this.categories[b][1],p=this.categories[b][2],C=this.categories[b][3];void 0!==C&&this.addCategoryItem("categories",f,p,C)}for(var _=5;_<a.length;_++){var y=a[_][10],m=a[_][26];y&&(y=y.split("[")[0].slice(0,-1),"Finished"===m&&"3D"!==y&&this.addCategoryItem(y,"Sales","Sales_SMEC","4"))}for(var w in this.sortedDatabase.sort((function(e,a){var s=t.database[e].length,r=t.database[a].length;return s<r?1:s>r?-1:0})),this.databaseCategories)if(this.databaseCategories[w].sort((function(t,e){return t.category<e.category?-1:t.category>e.category?1:0})),this.databaseCategories[w].length>0)for(var x=this.databaseCategories[w][0],S=0,k=0;k<this.databaseCategories[w].length;++k)x.category!==this.databaseCategories[w][k].category&&++S,(x=this.databaseCategories[w][k]).color=S}}},g=(a(70),a(72)),u=a(73),h=a.n(u),v=a(143),b=a(50),f=a(32),p=a(17),C=a(35),_=a(148),y=a(45),m=a(146),w=a(144),x=a(145),S=a(26),k=Object(g.a)(l,i,[],!1,null,null,null);h()(k,{VApp:v.a,VBtn:b.a,VCard:f.a,VCardActions:p.a,VCardText:p.b,VCardTitle:p.c,VChip:C.a,VDialog:_.a,VDivider:y.a,VOverflowBtn:m.a,VSimpleTable:w.a,VSpacer:x.a,VTextField:S.a}),k.options.__file="src/components/app.vue";var D=k.exports,T=a(134);r.a.use(T.a);var q=new T.a.Store({state:{},mutations:{},getters:{}});e.default=function(){widget.addEvent("onLoad",(function(){s.b.disableCSS(!0),window.title="Tablue Vue",widget.setTitle(window.title),new r.a({store:q,vuetify:c,render:function(t){return t(D)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){n.$emit("reloadwidget")})),widget.addEvent("onSearch",(function(t){n.$emit("onSearch",t)})),widget.addEvent("onResetSearch",(function(){n.$emit("onSearch","")}))}},70:function(t,e,a){"use strict";var s=a(20);a.n(s).a},71:function(t,e,a){(t.exports=a(4)(!1)).push([t.i,"\nhtml, body {\r\n    overflow-y: auto !important;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color:#ffffff;\n}\r\n",""])}}]);
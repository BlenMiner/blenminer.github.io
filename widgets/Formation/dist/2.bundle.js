(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{23:function(e,t,a){var s=a(63);"string"==typeof s&&(s=[[e.i,s,""]]);var r={insert:"head",singleton:!1};a(22)(s,r);s.locals&&(e.exports=s.locals)},3:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a(5),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-card",{attrs:{flat:""}},[a("v-tabs",{attrs:{"background-color":"#005685",dark:"","show-arrows":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"#5FEFE"}}),e._v(" "),e._l(e.sortedDatabase,(function(t){return a("v-tab",{key:t},[a("small",[e._v(e._s(t))])])}))],2),e._v(" "),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.sortedDatabase,(function(t){return a("v-tab-item",{key:t},[a("v-card",{attrs:{flat:""}},[a("v-data-table",{attrs:{headers:e.headers,items:e.databaseCategories[t],"items-per-page":15,dense:"","fixed-header":!0,height:"calc(100vh - 107px)"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{style:{"background-color":e.getColor(t.item.color)}},[a("td",[e._v(e._s(t.item.category))]),e._v(" "),a("td",[e._v(e._s(t.item.subcategory))]),e._v(" "),a("td",[e._v(" "+e._s(t.item.credits)+" ")]),e._v(" "),a("td",[e._v(" "+e._s(t.item.count)+" ")]),e._v(" "),a("td",[a("v-chip",{attrs:{color:t.item.count*t.item.credits>=5?"green":t.item.count*t.item.credits>=2?"orange":"red",dark:""}},[e._v("\n                                            "+e._s(t.item.count*t.item.credits)+"\n                                        ")])],1)])]}}],null,!0)})],1)],1)})),1)],1)],1)],1)};n._withStripped=!0;var i=a(141);a(44),a(51);r.a.use(i.a);var o=new r.a,l=new i.a({icons:{iconfont:"mdi"}});function c(e,t){t=t||",";for(var a=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),s=[[]],r=null,n=null;r=a.exec(e);){var i=r[1];i.length&&i!==t&&s.push([]),n=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],s[s.length-1].push(n)}return s}var d={name:"App",components:{},data:function(){return{table:null,categories:null,tab:null,headers:[{text:"Category",value:"category"},{text:"Sub-Category",value:"subcategory"},{text:"Credits",value:"credits"},{text:"Count",value:"count"},{text:"Total Credits",value:"credits"}],database:{},sortedDatabase:[],databaseCategories:{},loadingbar:!0,snackbarMsg:"",snackbar:!1,tenantId:-1,tenants:[]}},computed:{message:function(){return this.$store.state.message}},mounted:function(){var e=this,t=this;t.loadingbar=!0,o.$on("onSearch",(function(e){t.search=e})),o.$on("reloadwidget",(function(){t.reload()})),void 0===widget.id?setTimeout((function(){t.tenantDataLoaded([{id:-1}])}),500):requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(t){t.getPlatformServices({platformId:void 0,onComplete:e.tenantDataLoaded})}))},methods:{log:function(e){this.snackbarMsg=e,this.snackbar=!0},getCSRF:function(e,t){var a,s,r=this,n=r.tenants[r.tenantId]["3DSpace"];a=n+"/resources/v1/application/CSRF",s={onComplete:function(t){var a=JSON.parse(t);e(a.csrf.value)},onFailure:function(e){r.log(e),t()}},requirejs(["DS/WAFData/WAFData"],(function(e){e.authenticatedRequest(a,s)}))},filterCertificates:function(e){for(var t=0,a=0,s=function(t,a,s){for(var r=0;r<e.length;++r)if(e[r].Name.toLowerCase()===t.toLowerCase()+" "+a.toLowerCase()&&s<=new Date(e[r].Added))return!0;return!1},r=1;r<this.table.length;++r){var n=new Date,i=this.table[r][14].split(" ")[0].split("/"),o=new Date(i[2],i[0]-1,i[1]),l=this.table[r][13].split(" ")[0].split("/"),c=new Date(l[2],l[1]-1,l[0]);s(this.table[r][4],this.table[r][5],c)?a++:n>o&&(++t,this.table.splice(r++,1))}console.log("Expired: "+t),console.log("Obsolete: "+a)},reload:function(){var e=this,t=widget.getValue("_FileKey_");e.loadingbar=!0,e.tenantId=widget.getValue("_CurrentTenantID_");var a=new XMLHttpRequest;a.open("GET","https://bcracker.dev/widgets/database_kpi.php?&key="+t,!1),a.send(null),this.table=c(a.responseText,";"),a.open("GET","https://bcracker.dev/widgets/obsolete.php?key="+t,!1),a.send(null);var s=JSON.parse(a.responseText);this.filterCertificates(s),a.open("GET","https://bcracker.dev/widgets/cert_category.php?&key="+t,!1),a.send(null),this.categories=c(a.responseText,";"),this.sortedDatabase.splice(0,this.sortedDatabase.length),this.database={},this.databaseCategories={};for(var n=1;n<this.table.length;n++){var i=this.table[n][1];if(i){for(var o=this.table[n][3].split("[")[1].substring(0,15),l=this.table[n][9],d=!1,u="Brand_Essentials",h="Brand Articulate",g="0,5",b=1;b<this.categories.length;++b)if(this.categories[b][0]===l){u=this.categories[b][1],h=this.categories[b][2],g=this.categories[b][3],d=!0;break}void 0===this.database[i]&&(this.sortedDatabase.push(i),r.a.set(this.database,i,[]),r.a.set(this.databaseCategories,i,[])),d?this.addCategoryItem(i,u,h,g):l.startsWith("SMEC")?this.addCategoryItem(i,"Sales","Sales_SMEC","4"):console.error(l+" doesn't exist in the list.");var p={partnerId:o,certName:l,certExpiration:this.table[n][14],certProfile:this.table[n][11],certAxis:this.table[n][10],certCategory:this.table[n][12],category:u,subcategory:h,credits:g};this.database[i].push(p)}}for(var v in this.sortedDatabase.sort((function(t,a){var s=e.database[t].length,r=e.database[a].length;return s<r?1:s>r?-1:0})),this.databaseCategories)if(this.databaseCategories[v].sort((function(e,t){return e.category<t.category?-1:e.category>t.category?1:0})),this.databaseCategories[v].length>0)for(var f=this.databaseCategories[v][0],m=0,w=0;w<this.databaseCategories[v].length;++w)f.category!==this.databaseCategories[v][w].category&&++m,(f=this.databaseCategories[v][w]).color=m;e.loadingbar=!1},tenantDataLoaded:function(e){this.tenants=[];for(var t=[],a=0,s=0;s<e.length;s++)void 0!==e[s]["3DSpace"]&&(t.push({value:"".concat(a++),label:"".concat(e[s].platformId," - ").concat(e[s].displayName)}),this.tenants.push(e[s]));widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:t}),widget.addPreference({name:"_FileKey_",type:"text",label:"File Key",defaultValue:""}),o.$emit("reloadwidget")},getColor:function(e){return e%2==1?"white":"#EFEFEF"},addCategoryItem:function(e,t,a,s){var r=!1;if(this.databaseCategories[e]){for(var n=0;n<this.databaseCategories[e].length;++n){var i=this.databaseCategories[e][n];if(i.category===t&&i.subcategory===a)return i.count+=1,void(r=!0)}r||this.databaseCategories[e].push({category:t,subcategory:a,credits:Number(s.replace(/,/g,".")),count:1,color:0})}else console.error(e+" doesn't have other licenses?")}}},u=(a(62),a(64)),h=a(65),g=a.n(h),b=a(137),p=a(138),v=a(39),f=a(140),m=a(139),w=a(143),C=a(142),y=a(130),_=a(128),S=Object(u.a)(d,n,[],!1,null,null,null);g()(S,{VApp:b.a,VCard:p.a,VChip:v.a,VDataTable:f.a,VTab:m.a,VTabItem:w.a,VTabs:C.a,VTabsItems:y.a,VTabsSlider:_.a}),S.options.__file="src/components/app.vue";var k=S.exports,D=a(129);r.a.use(D.a);var x=new D.a.Store({state:{},mutations:{},getters:{}});t.default=function(){widget.addEvent("onLoad",(function(){s.b.disableCSS(!0),window.title="Tablue Vue",widget.setTitle(window.title),new r.a({store:x,vuetify:l,render:function(e){return e(k)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){o.$emit("reloadwidget")})),widget.addEvent("onSearch",(function(e){o.$emit("onSearch",e)})),widget.addEvent("onResetSearch",(function(){o.$emit("onSearch","")}))}},62:function(e,t,a){"use strict";var s=a(23);a.n(s).a},63:function(e,t,a){(e.exports=a(7)(!1)).push([e.i,"\nhtml, body {\r\n    overflow-y: auto !important;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color:#ffffff;\n}\r\n",""])}}]);
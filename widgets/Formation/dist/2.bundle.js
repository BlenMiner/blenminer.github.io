(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{26:function(e,t,a){var s=a(81);"string"==typeof s&&(s=[[e.i,s,""]]);var i={insert:"head",singleton:!1};a(25)(s,i);s.locals&&(e.exports=s.locals)},3:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a(8),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-card",{attrs:{flat:""}},[a("v-dialog",{attrs:{persistent:"","min-width":"400"},model:{value:e.permissionsDialog,callback:function(t){e.permissionsDialog=t},expression:"permissionsDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"#4b839e",dark:""}},[a("v-toolbar-title",[e._v("Pick the partners you want to see")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:"",small:""},on:{click:function(t){return e.selectall()}}},[e._v("Select All")]),e._v(" /\n                    "),a("v-btn",{attrs:{text:"",small:""},on:{click:function(t){return e.deselectall()}}},[e._v("Deselect All")])],1),e._v(" "),a("v-card-text",[a("v-list",{staticClass:"overflow-y-auto",attrs:{height:"60vh",dense:""}},[a("v-list-item-group",{attrs:{multiple:"",color:"black"},model:{value:e.permissionsSelection,callback:function(t){e.permissionsSelection=t},expression:"permissionsSelection"}},e._l(e.sortedDatabase,(function(t,s){return a("v-list-item",{key:s},[a("v-list-item-content",[e.permissionsSelection&&e.permissionsSelection.includes(s)?a("v-list-item-title",{staticStyle:{color:"black"},domProps:{textContent:e._s(t)}}):a("v-list-item-title",{staticStyle:{color:"#BBB"},domProps:{textContent:e._s(t)}})],1)],1)})),1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",dark:""},on:{click:function(t){e.permissionsDialog=!1,e.applyselection()}}},[e._v("Confirm Selection")])],1)],1)],1),e._v(" "),a("v-tabs",{attrs:{"background-color":"#005685",dark:"","show-arrows":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"#5FEFE"}}),e._v(" "),e._l(e.filteredDatabase,(function(t){return a("v-tab",{key:t},[a("small",[e._v(e._s(t))])])}))],2),e._v(" "),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.filteredDatabase,(function(t){return a("v-tab-item",{key:t},[a("v-card",{attrs:{flat:""}},[a("v-data-table",{attrs:{headers:e.headers,items:e.databaseCategories[t],"items-per-page":15,dense:"","fixed-header":!0,height:"calc(100vh - 138px)"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{style:{"background-color":e.getColor(t.item.color)}},[a("td",[e._v(e._s(t.item.category))]),e._v(" "),a("td",[e._v(e._s(t.item.subcategory))]),e._v(" "),a("td",[e._v(" "+e._s(t.item.credits)+" ")]),e._v(" "),a("td",[e._v(" "+e._s(t.item.count)+" ")]),e._v(" "),a("td",[a("v-chip",{attrs:{color:t.item.count*t.item.credits>=5?"green":t.item.count*t.item.credits>=2?"orange":"red",dark:""}},[e._v("\n                                            "+e._s(t.item.count*t.item.credits)+"\n                                        ")])],1)])]}}],null,!0)}),e._v(" "),a("hr"),e._v(" "),a("table",{staticClass:"ma-0 pa-0",attrs:{width:"100%"}},[a("tr",[a("td",{staticClass:"text-left",staticStyle:{overflow:"hidden"}},[a("a",{staticStyle:{color:"#555"},on:{click:function(t){e.permissionsDialog=!0}}},[a("u",[e._v("Change selection")])])]),e._v(" "),a("td",{staticClass:"text-right",staticStyle:{color:"#555",overflow:"hidden"}},[e._v("Creator: VBU4, Last update: "+e._s(e.lastmodif))])])])],1)],1)})),1)],1)],1)],1)};n._withStripped=!0;var o=a(172);a(62),a(69);i.a.use(o.a);var r=new i.a,l=new o.a({icons:{iconfont:"mdi"}});function c(e,t){t=t||",";for(var a=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),s=[[]],i=null,n=null;i=a.exec(e);){var o=i[1];o.length&&o!==t&&s.push([]),n=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],s[s.length-1].push(n)}return s}var d={name:"App",components:{},data:function(){return{table:null,categories:null,tab:null,lastmodif:"",headers:[{text:"Category",value:"category"},{text:"Sub-Category",value:"subcategory"},{text:"Credits",value:"credits"},{text:"Count",value:"count"},{text:"Total Credits",value:"credits"}],permissionsDialog:!0,permissionsSelection:null,database:{},sortedDatabase:[],filteredDatabase:[],databaseCategories:{},loadingbar:!0,snackbarMsg:"",snackbar:!1,tenantId:-1,tenants:[]}},computed:{message:function(){return this.$store.state.message}},mounted:function(){var e=this,t=this;t.loadingbar=!0,r.$on("onSearch",(function(e){t.search=e})),r.$on("reloadwidget",(function(){t.reload()})),void 0===widget.id?setTimeout((function(){t.tenantDataLoaded([{id:-1}])}),500):requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(t){t.getPlatformServices({platformId:void 0,onComplete:e.tenantDataLoaded})}))},methods:{log:function(e){this.snackbarMsg=e,this.snackbar=!0},selectall:function(){for(var e=0;e<this.sortedDatabase.length;++e)this.permissionsSelection.includes(e)||this.permissionsSelection.push(e)},deselectall:function(){this.permissionsSelection=[]},applyselection:function(){this.filteredDatabase=[],this.permissionsSelection.sort((function(e,t){return e>t}));for(var e=0;e<this.permissionsSelection.length;++e)this.filteredDatabase.push(this.sortedDatabase[this.permissionsSelection[e]]);var t=JSON.stringify(this.permissionsSelection);widget.setValue("_SavedSelection_",t),function(e,t,a){var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);var i="expires="+s.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"}("selection",t,1)},getCSRF:function(e,t){var a,s,i=this,n=i.tenants[i.tenantId]["3DSpace"];a=n+"/resources/v1/application/CSRF",s={onComplete:function(t){var a=JSON.parse(t);e(a.csrf.value)},onFailure:function(e){i.log(e),t()}},requirejs(["DS/WAFData/WAFData"],(function(e){e.authenticatedRequest(a,s)}))},filterCertificates:function(e){for(var t=0,a=0,s=0,i=function(t,a,s){for(var i=0;i<e.length;++i)if(e[i].Name.toLowerCase()===t.toLowerCase()+" "+a.toLowerCase()&&s<=new Date(e[i].Added))return!0;return!1},n=1;n<this.table.length;++n){var o=new Date,r=this.table[n][14].split(" ")[0].split("/"),l=new Date(r[2],r[0]-1,r[1]),c=this.table[n][13].split(" ")[0].split("/"),d=new Date(c[2],c[1]-1,c[0]);i(this.table[n][4],this.table[n][5],d)?a++:o>l?(++t,this.table.splice(n++,1)):"NO"===this.table[n][15]&&(++s,this.table.splice(n++,1))}console.log("Expired: "+t),console.log("Obsolete: "+a),console.log("Invalid: "+s)},reload:function(){var e=widget.getValue("_FileKey_");e||(e=window.location.search.substring(1)),this.loadingbar=!0,this.tenantId=widget.getValue("_CurrentTenantID_");var t=new XMLHttpRequest;t.open("GET","https://bcracker.dev/widgets/database_kpi.php?&key="+e,!1),t.send(null),this.table=c(t.responseText,";"),t.open("GET","https://bcracker.dev/widgets/obsolete.php?key="+e,!1),t.send(null);var a=JSON.parse(t.responseText);this.filterCertificates(a),t.open("GET","https://bcracker.dev/widgets/cert_category.php?&key="+e,!1),t.send(null),this.categories=c(t.responseText,";"),t.open("GET","https://bcracker.dev/widgets/getlastupdate.php",!1),t.send(null),this.lastmodif=t.responseText,this.sortedDatabase.splice(0,this.sortedDatabase.length),this.database={},this.databaseCategories={};for(var s=1;s<this.table.length;s++){var n=this.table[s][1];if(n){for(var o=this.table[s][3].split("[")[1].substring(0,15),r=this.table[s][9],l=!1,d="Brand_Essentials",u="Brand Articulate",h="0,5",p=1;p<this.categories.length;++p)if(this.categories[p][0]===r){d=this.categories[p][1],u=this.categories[p][2],h=this.categories[p][3],l=!0;break}void 0===this.database[n]&&(this.sortedDatabase.push(n),i.a.set(this.database,n,[]),i.a.set(this.databaseCategories,n,[])),l?this.addCategoryItem(n,d,u,h):r.startsWith("SMEC")?this.addCategoryItem(n,"Sales","Sales_SMEC","4"):console.error(r+" doesn't exist in the list.");var g={partnerId:o,certName:r,certExpiration:this.table[s][14],certProfile:this.table[s][11],certAxis:this.table[s][10],certCategory:this.table[s][12],category:d,subcategory:u,credits:h};this.database[n].push(g)}}for(var v in this.sortedDatabase.sort((function(e,t){return t<e?1:t>e?-1:0})),this.databaseCategories)if(this.databaseCategories[v].sort((function(e,t){return e.category<t.category?-1:e.category>t.category?1:0})),this.databaseCategories[v].length>0)for(var b=this.databaseCategories[v][0],f=0,m=0;m<this.databaseCategories[v].length;++m)b.category!==this.databaseCategories[v][m].category&&++f,(b=this.databaseCategories[v][m]).color=f;this.loadingbar=!1},tenantDataLoaded:function(e){this.tenants=[];for(var t=[],a=0,s=0;s<e.length;s++)void 0!==e[s]["3DSpace"]&&(t.push({value:"".concat(a++),label:"".concat(e[s].platformId," - ").concat(e[s].displayName)}),this.tenants.push(e[s]));widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:t}),widget.addPreference({name:"_FileKey_",type:"text",label:"File Key",defaultValue:""}),widget.addPreference({name:"_SavedSelection_",type:"hidden",label:"Saved Selection",defaultValue:"[]"}),this.permissionsSelection=JSON.parse(widget.getValue("_SavedSelection_")),""===this.permissionsSelection&&(this.permissionsSelection=JSON.parse(function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),s=0;s<a.length;s++){for(var i=a[s];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""}("selection"))),r.$emit("reloadwidget")},getColor:function(e){return e%2==1?"white":"#EFEFEF"},addCategoryItem:function(e,t,a,s){var i=!1;if(this.databaseCategories[e]){for(var n=0;n<this.databaseCategories[e].length;++n){var o=this.databaseCategories[e][n];if(o.category===t&&o.subcategory===a)return o.count+=1,void(i=!0)}i||this.databaseCategories[e].push({category:t,subcategory:a,credits:Number(s.replace(/,/g,".")),count:1,color:0})}else console.error(e+" doesn't have other licenses?")}}},u=(a(80),a(82)),h=a(83),p=a.n(h),g=a(168),v=a(59),b=a(41),f=a(32),m=a(44),_=a(171),S=a(173),w=a(48),C=a(34),y=a(15),k=a(49),D=a(169),x=a(170),V=a(175),T=a(174),E=a(160),I=a(152),L=a(58),F=a(57),A=Object(u.a)(d,n,[],!1,null,null,null);p()(A,{VApp:g.a,VBtn:v.a,VCard:b.a,VCardActions:f.a,VCardText:f.b,VChip:m.a,VDataTable:_.a,VDialog:S.a,VList:w.a,VListItem:C.a,VListItemContent:y.a,VListItemGroup:k.a,VListItemTitle:y.b,VSpacer:D.a,VTab:x.a,VTabItem:V.a,VTabs:T.a,VTabsItems:E.a,VTabsSlider:I.a,VToolbar:L.a,VToolbarTitle:F.a}),A.options.__file="src/components/app.vue";var N=A.exports,O=a(159);i.a.use(O.a);var R=new O.a.Store({state:{},mutations:{},getters:{}});t.default=function(){widget.addEvent("onLoad",(function(){s.b.disableCSS(!0),window.title="Tablue Vue",widget.setTitle(window.title),new i.a({store:R,vuetify:l,render:function(e){return e(N)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){r.$emit("reloadwidget")})),widget.addEvent("onSearch",(function(e){r.$emit("onSearch",e)})),widget.addEvent("onResetSearch",(function(){r.$emit("onSearch","")}))}},80:function(e,t,a){"use strict";var s=a(26);a.n(s).a},81:function(e,t,a){(e.exports=a(5)(!1)).push([e.i,"\nhtml, body {\r\n    overflow-y: auto !important;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color:#ffffff;\n}\r\n",""])}}]);
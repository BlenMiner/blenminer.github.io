(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{23:function(t,e,a){var s=a(63);"string"==typeof s&&(s=[[t.i,s,""]]);var r={insert:"head",singleton:!1};a(22)(s,r);s.locals&&(t.exports=s.locals)},3:function(t,e,a){"use strict";a.r(e);var s=a(0),r=a(5),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-card",{attrs:{flat:""}},[a("v-tabs",{attrs:{"background-color":"#005685",dark:"","show-arrows":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"#5FEFE"}}),t._v(" "),t._l(t.sortedDatabase,(function(e){return a("v-tab",{key:e},[a("small",[t._v(t._s(e))])])}))],2),t._v(" "),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.sortedDatabase,(function(e){return a("v-tab-item",{key:e},[a("v-card",{attrs:{flat:""}},[a("v-data-table",{attrs:{headers:t.headers,items:t.databaseCategories[e],"items-per-page":15,dense:"","fixed-header":!0,height:"calc(100vh - 107px)"},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",{style:{"background-color":t.getColor(e.item.color)}},[a("td",[t._v(t._s(e.item.category))]),t._v(" "),a("td",[t._v(t._s(e.item.subcategory))]),t._v(" "),a("td",[t._v(" "+t._s(e.item.credits)+" ")]),t._v(" "),a("td",[t._v(" "+t._s(e.item.count)+" ")]),t._v(" "),a("td",[a("v-chip",{attrs:{color:e.item.count*e.item.credits>=5?"green":e.item.count*e.item.credits>=2?"orange":"red",dark:""}},[t._v("\n                                            "+t._s(e.item.count*e.item.credits)+"\n                                        ")])],1)])]}}],null,!0)})],1)],1)})),1)],1)],1)],1)};n._withStripped=!0;var i=a(141);a(44),a(51);r.a.use(i.a);var o=new r.a,c=new i.a({icons:{iconfont:"mdi"}});function l(t,e){e=e||",";for(var a=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),s=[[]],r=null,n=null;r=a.exec(t);){var i=r[1];i.length&&i!==e&&s.push([]),n=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],s[s.length-1].push(n)}return s}var d={name:"App",components:{},data:function(){return{table:null,categories:null,tab:null,headers:[{text:"Category",value:"category"},{text:"Sub-Category",value:"subcategory"},{text:"Credits",value:"credits"},{text:"Count",value:"count"},{text:"Total Credits",value:"credits"}],database:{},sortedDatabase:[],databaseCategories:{},loadingbar:!0,snackbarMsg:"",snackbar:!1,tenantId:-1,tenants:[]}},computed:{message:function(){return this.$store.state.message}},mounted:function(){var t=this,e=this;e.loadingbar=!0,o.$on("onSearch",(function(t){e.search=t})),o.$on("reloadwidget",(function(){e.reload()})),void 0===widget.id?setTimeout((function(){e.tenantDataLoaded([{id:-1}])}),500):requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(e){e.getPlatformServices({platformId:void 0,onComplete:t.tenantDataLoaded})}))},methods:{log:function(t){this.snackbarMsg=t,this.snackbar=!0},getCSRF:function(t,e){var a,s,r=this,n=r.tenants[r.tenantId]["3DSpace"];a=n+"/resources/v1/application/CSRF",s={onComplete:function(e){var a=JSON.parse(e);t(a.csrf.value)},onFailure:function(t){r.log(t),e()}},requirejs(["DS/WAFData/WAFData"],(function(t){t.authenticatedRequest(a,s)}))},filterCertificates:function(){for(var t=0,e=0;e<this.table.length;++e){var a=new Date,s=this.table[e][9].split(" ")[0].split("/");a>new Date(s[2],s[1]-1,s[0])&&(++t,this.table.splice(e++,1))}console.log("Expired: "+t)},reload:function(){var t=this;t.loadingbar=!0,t.tenantId=widget.getValue("_CurrentTenantID_");var e=new XMLHttpRequest;e.open("GET","https://bcracker.dev/widgets/database_kpi.php",!1),e.send(null),this.table=l(e.responseText,";"),this.filterCertificates(),e.open("GET","https://bcracker.dev/widgets/cert_category.php",!1),e.send(null),this.categories=l(e.responseText,";"),e.open("GET","https://bcracker.dev/widgets/smec.php",!1),e.send(null);var a=l(e.responseText,";");this.sortedDatabase.splice(0,this.sortedDatabase.length),this.database={},this.databaseCategories={};for(var s=1;s<this.table.length;s++){var n=this.table[s][0];if(n){var i=n.split("[")[1].slice(0,-1);n=n.split("[")[0].slice(0,-1);for(var o=this.table[s][7],c=!1,d="Brand_Essentials",u="Brand Articulate",h="0,5",g=1;g<this.categories.length;++g)if(this.categories[g][0]===o){d=this.categories[g][1],u=this.categories[g][2],h=this.categories[g][3],c=!0;break}void 0===this.database[n]&&(this.sortedDatabase.push(n),r.a.set(this.database,n,[]),r.a.set(this.databaseCategories,n,[])),c||console.error(o+" doesn't exist in the list.");var b={partnerId:i,certName:o,certExpiration:this.table[s][9],certProfile:this.table[s][11],certAxis:this.table[s][12],certCategory:this.table[s][13],category:d,subcategory:u,credits:h};this.database[n].push(b),this.addCategoryItem(n,d,u,h)}}for(var p=5;p<a.length;p++){var v=a[p][10],f=a[p][26];v&&(v=v.split("[")[0].slice(0,-1),"Finished"===f&&"3D"!==v&&this.addCategoryItem(v,"Sales","Sales_SMEC","4"))}for(var m in this.sortedDatabase.sort((function(e,a){var s=t.database[e].length,r=t.database[a].length;return s<r?1:s>r?-1:0})),this.databaseCategories)if(this.databaseCategories[m].sort((function(t,e){return t.category<e.category?-1:t.category>e.category?1:0})),this.databaseCategories[m].length>0)for(var C=this.databaseCategories[m][0],w=0,_=0;_<this.databaseCategories[m].length;++_)C.category!==this.databaseCategories[m][_].category&&++w,(C=this.databaseCategories[m][_]).color=w;t.loadingbar=!1},tenantDataLoaded:function(t){this.tenants=[];for(var e=[],a=0,s=0;s<t.length;s++)void 0!==t[s]["3DSpace"]&&(e.push({value:"".concat(a++),label:"".concat(t[s].platformId," - ").concat(t[s].displayName)}),this.tenants.push(t[s]));widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:e}),o.$emit("reloadwidget")},getColor:function(t){return t%2==1?"white":"#EFEFEF"},addCategoryItem:function(t,e,a,s){var r=!1;if(this.databaseCategories[t]){for(var n=0;n<this.databaseCategories[t].length;++n){var i=this.databaseCategories[t][n];if(i.category===e&&i.subcategory===a)return i.count+=1,void(r=!0)}r||this.databaseCategories[t].push({category:e,subcategory:a,credits:Number(s.replace(/,/g,".")),count:1,color:0})}else console.error(t+" doesn't have other licenses?")}}},u=(a(62),a(64)),h=a(65),g=a.n(h),b=a(137),p=a(138),v=a(39),f=a(140),m=a(139),C=a(143),w=a(142),_=a(130),y=a(128),S=Object(u.a)(d,n,[],!1,null,null,null);g()(S,{VApp:b.a,VCard:p.a,VChip:v.a,VDataTable:f.a,VTab:m.a,VTabItem:C.a,VTabs:w.a,VTabsItems:_.a,VTabsSlider:y.a}),S.options.__file="src/components/app.vue";var D=S.exports,x=a(129);r.a.use(x.a);var k=new x.a.Store({state:{},mutations:{},getters:{}});e.default=function(){widget.addEvent("onLoad",(function(){s.b.disableCSS(!0),window.title="Tablue Vue",widget.setTitle(window.title),new r.a({store:k,vuetify:c,render:function(t){return t(D)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){o.$emit("reloadwidget")})),widget.addEvent("onSearch",(function(t){o.$emit("onSearch",t)})),widget.addEvent("onResetSearch",(function(){o.$emit("onSearch","")}))}},62:function(t,e,a){"use strict";var s=a(23);a.n(s).a},63:function(t,e,a){(t.exports=a(7)(!1)).push([t.i,"\nhtml, body {\r\n    overflow-y: auto !important;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color:#ffffff;\n}\r\n",""])}}]);
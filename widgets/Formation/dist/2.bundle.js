(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{26:function(t,e,a){var s=a(81);"string"==typeof s&&(s=[[t.i,s,""]]);var i={insert:"head",singleton:!1};a(25)(s,i);s.locals&&(t.exports=s.locals)},3:function(t,e,a){"use strict";a.r(e);var s=a(0),i=a(8),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-card",{attrs:{flat:""}},[a("v-dialog",{attrs:{persistent:"","min-width":"400"},model:{value:t.permissionsDialog,callback:function(e){t.permissionsDialog=e},expression:"permissionsDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"#4b839e",dark:""}},[a("v-toolbar-title",[t._v("Pick the partners you want to see")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{text:"",small:""},on:{click:function(e){return t.selectall()}}},[t._v("Select All")]),t._v(" /\n                    "),a("v-btn",{attrs:{text:"",small:""},on:{click:function(e){return t.deselectall()}}},[t._v("Deselect All")])],1),t._v(" "),a("v-card-text",[a("v-list",{staticClass:"overflow-y-auto",attrs:{height:"60vh",dense:""}},[a("v-list-item-group",{attrs:{multiple:"",color:"black"},model:{value:t.permissionsSelection,callback:function(e){t.permissionsSelection=e},expression:"permissionsSelection"}},t._l(t.sortedDatabase,(function(e,s){return a("v-list-item",{key:s},[a("v-list-item-content",[t.permissionsSelection&&t.permissionsSelection.includes(s)?a("v-list-item-title",{staticStyle:{color:"black"},domProps:{textContent:t._s(e)}}):a("v-list-item-title",{staticStyle:{color:"#BBB"},domProps:{textContent:t._s(e)}})],1)],1)})),1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",dark:""},on:{click:function(e){t.permissionsDialog=!1,t.applyselection()}}},[t._v("Confirm Selection")])],1)],1)],1),t._v(" "),a("v-tabs",{attrs:{"background-color":"#005685",dark:"","show-arrows":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"#5FEFE"}}),t._v(" "),t._l(t.filteredDatabase,(function(e){return a("v-tab",{key:e},[a("small",[t._v(t._s(e))])])}))],2),t._v(" "),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.filteredDatabase,(function(e){return a("v-tab-item",{key:e},[a("v-card",{attrs:{flat:""}},[a("v-data-table",{attrs:{headers:t.headers,items:t.databaseCategories[e],"items-per-page":15,dense:"","fixed-header":!0,height:"calc(100vh - 138px)"},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",{style:{"background-color":t.getColor(e.item.color)}},[a("td",[t._v(t._s(e.item.category))]),t._v(" "),a("td",[t._v(t._s(e.item.subcategory))]),t._v(" "),a("td",{staticClass:"text-center"},[a("v-chip",{attrs:{color:"#555555",dark:""}},[t._v("\n                                            "+t._s(e.item.credits.toFixed(1))+"\n                                        ")])],1),t._v(" "),a("td",{staticClass:"text-center"},[a("v-chip",{attrs:{color:"#777",dark:""}},[t._v("\n                                            "+t._s(e.item.count)+"\n                                        ")])],1),t._v(" "),a("td",{staticClass:"text-center"},[a("v-chip",{attrs:{color:e.item.count*e.item.credits>=5?"green":e.item.count*e.item.credits>=2?"orange":"red",dark:""}},[t._v("\n                                            "+t._s(e.item.count*e.item.credits)+"\n                                        ")])],1)])]}}],null,!0)}),t._v(" "),a("hr"),t._v(" "),a("table",{staticClass:"ma-0 pa-0",attrs:{width:"100%"}},[a("tr",[a("td",{staticClass:"text-left",staticStyle:{overflow:"hidden"}},[a("a",{staticStyle:{color:"#555"},on:{click:function(e){t.permissionsDialog=!0}}},[a("u",[t._v("Change selection")])])]),t._v(" "),a("td",{staticClass:"text-right",staticStyle:{color:"#555",overflow:"hidden"}},[t._v("Creator: VBU4, Last update: "+t._s(t.lastmodif))])])])],1)],1)})),1)],1)],1)],1)};n._withStripped=!0;var o=a(172);a(62),a(69);i.a.use(o.a);var r=new i.a,l=new o.a({icons:{iconfont:"mdi"}});function c(t,e){e=e||",";for(var a=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),s=[[]],i=null,n=null;i=a.exec(t);){var o=i[1];o.length&&o!==e&&s.push([]),n=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],s[s.length-1].push(n)}return s}var d={name:"App",components:{},data:function(){return{table:null,categories:null,tab:null,lastmodif:"",headers:[{text:"Category",value:"category"},{text:"Sub-Category",value:"subcategory"},{text:"Credits",value:"credits"},{text:"Count",value:"count"},{text:"Total Credits",value:"credits"}],permissionsDialog:!0,permissionsSelection:null,database:{},sortedDatabase:[],filteredDatabase:[],databaseCategories:{},loadingbar:!0,snackbarMsg:"",snackbar:!1,tenantId:-1,tenants:[]}},computed:{message:function(){return this.$store.state.message}},mounted:function(){var t=this,e=this;widget.name="",e.loadingbar=!0,r.$on("onSearch",(function(t){e.search=t})),r.$on("reloadwidget",(function(){e.reload()})),void 0===widget.id?setTimeout((function(){e.tenantDataLoaded([{id:-1}])}),500):requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(e){e.getPlatformServices({platformId:void 0,onComplete:t.tenantDataLoaded})}))},methods:{log:function(t){this.snackbarMsg=t,this.snackbar=!0},selectall:function(){for(var t=0;t<this.sortedDatabase.length;++t)this.permissionsSelection.includes(t)||this.permissionsSelection.push(t)},deselectall:function(){this.permissionsSelection=[]},applyselection:function(){this.filteredDatabase=[],this.permissionsSelection.sort();for(var t=0;t<this.permissionsSelection.length;++t)this.filteredDatabase.push(this.sortedDatabase[this.permissionsSelection[t]]);var e=JSON.stringify(this.permissionsSelection);widget.setValue("_SavedSelection_",e),function(t,e,a){var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);var i="expires="+s.toUTCString();document.cookie=t+"="+e+";"+i+";path=/"}("selection",e,1)},getCSRF:function(t,e){var a,s,i=this,n=i.tenants[i.tenantId]["3DSpace"];a=n+"/resources/v1/application/CSRF",s={onComplete:function(e){var a=JSON.parse(e);t(a.csrf.value)},onFailure:function(t){i.log(t),e()}},requirejs(["DS/WAFData/WAFData"],(function(t){t.authenticatedRequest(a,s)}))},filterCertificates:function(t){for(var e=0,a=0,s=0,i=function(e,a,s){for(var i=0;i<t.length;++i)if(t[i].Name.toLowerCase()===e.toLowerCase()+" "+a.toLowerCase()&&s<=new Date(t[i].Added))return!0;return!1},n=1;n<this.table.length;++n){var o=new Date,r=this.table[n][14].split(" ")[0].split("/"),l=new Date(r[2],r[0]-1,r[1]),c=this.table[n][13].split(" ")[0].split("/"),d=new Date(c[2],c[1]-1,c[0]);i(this.table[n][4],this.table[n][5],d)?a++:o>l?(++e,this.table.splice(n++,1)):"NO"===this.table[n][15]&&(++s,this.table.splice(n++,1))}console.log("Expired: "+e),console.log("Obsolete: "+a),console.log("Invalid: "+s)},reload:function(){var t=widget.getValue("_FileKey_");t||(t=window.location.search.substring(1)),this.loadingbar=!0,this.tenantId=widget.getValue("_CurrentTenantID_");var e=new XMLHttpRequest;e.open("GET","https://bcracker.dev/widgets/database_kpi.php?&key="+t,!1),e.send(null),this.table=c(e.responseText,";"),e.open("GET","https://bcracker.dev/widgets/obsolete.php?key="+t,!1),e.send(null);var a=JSON.parse(e.responseText);this.filterCertificates(a),e.open("GET","https://bcracker.dev/widgets/cert_category.php?&key="+t,!1),e.send(null),this.categories=c(e.responseText,";"),e.open("GET","https://bcracker.dev/widgets/getlastupdate.php",!1),e.send(null),this.lastmodif=e.responseText,this.sortedDatabase.splice(0,this.sortedDatabase.length),this.database={},this.databaseCategories={};for(var s=1;s<this.table.length;s++){var n=this.table[s][1];if(n){for(var o=this.table[s][3].split("[")[1].substring(0,15),r=this.table[s][9],l=!1,d="Brand_Essentials",u="Brand Articulate",h="0,5",p=1;p<this.categories.length;++p)if(this.categories[p][0]===r){d=this.categories[p][1],u=this.categories[p][2],h=this.categories[p][3],l=!0;break}void 0===this.database[n]&&(this.sortedDatabase.push(n),i.a.set(this.database,n,[]),i.a.set(this.databaseCategories,n,[])),l?this.addCategoryItem(n,d,u,h):r.startsWith("SMEC")?this.addCategoryItem(n,"Sales","Sales_SMEC","4"):console.error(r+" doesn't exist in the list.");var g={partnerId:o,certName:r,certExpiration:this.table[s][14],certProfile:this.table[s][11],certAxis:this.table[s][10],certCategory:this.table[s][12],category:d,subcategory:u,credits:h};this.database[n].push(g)}}for(var v in this.sortedDatabase.sort((function(t,e){return e<t?1:e>t?-1:0})),this.databaseCategories)if(this.databaseCategories[v].sort((function(t,e){return t.category<e.category?-1:t.category>e.category?1:0})),this.databaseCategories[v].length>0)for(var b=this.databaseCategories[v][0],f=0,m=0;m<this.databaseCategories[v].length;++m)b.category!==this.databaseCategories[v][m].category&&++f,(b=this.databaseCategories[v][m]).color=f;this.loadingbar=!1},tenantDataLoaded:function(t){this.tenants=[];for(var e=[],a=0,s=0;s<t.length;s++)void 0!==t[s]["3DSpace"]&&(e.push({value:"".concat(a++),label:"".concat(t[s].platformId," - ").concat(t[s].displayName)}),this.tenants.push(t[s]));widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:e}),widget.addPreference({name:"_FileKey_",type:"text",label:"File Key",defaultValue:""}),widget.addPreference({name:"_SavedSelection_",type:"hidden",label:"Saved Selection",defaultValue:"[]"}),this.permissionsSelection=JSON.parse(widget.getValue("_SavedSelection_")),"[]"===this.permissionsSelection&&(this.permissionsSelection=JSON.parse(function(t){for(var e=t+"=",a=decodeURIComponent(document.cookie).split(";"),s=0;s<a.length;s++){for(var i=a[s];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return""}("selection"))),r.$emit("reloadwidget")},getColor:function(t){return t%2==1?"white":"#EFEFEF"},addCategoryItem:function(t,e,a,s){var i=!1;if(this.databaseCategories[t]){for(var n=0;n<this.databaseCategories[t].length;++n){var o=this.databaseCategories[t][n];if(o.category===e&&o.subcategory===a)return o.count+=1,void(i=!0)}i||this.databaseCategories[t].push({category:e,subcategory:a,credits:Number(s.replace(/,/g,".")),count:1,color:0})}else console.error(t+" doesn't have other licenses?")}}},u=(a(80),a(82)),h=a(83),p=a.n(h),g=a(168),v=a(59),b=a(41),f=a(32),m=a(44),_=a(171),S=a(173),C=a(48),w=a(34),y=a(15),k=a(49),x=a(169),D=a(170),V=a(175),T=a(174),E=a(160),I=a(152),F=a(58),L=a(57),A=Object(u.a)(d,n,[],!1,null,null,null);p()(A,{VApp:g.a,VBtn:v.a,VCard:b.a,VCardActions:f.a,VCardText:f.b,VChip:m.a,VDataTable:_.a,VDialog:S.a,VList:C.a,VListItem:w.a,VListItemContent:y.a,VListItemGroup:k.a,VListItemTitle:y.b,VSpacer:x.a,VTab:D.a,VTabItem:V.a,VTabs:T.a,VTabsItems:E.a,VTabsSlider:I.a,VToolbar:F.a,VToolbarTitle:L.a}),A.options.__file="src/components/app.vue";var N=A.exports,O=a(159);i.a.use(O.a);var R=new O.a.Store({state:{},mutations:{},getters:{}});e.default=function(){widget.addEvent("onLoad",(function(){s.b.disableCSS(!0),window.title="Tablue Vue",widget.setTitle(window.title),new i.a({store:R,vuetify:l,render:function(t){return t(N)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){r.$emit("reloadwidget")})),widget.addEvent("onSearch",(function(t){r.$emit("onSearch",t)})),widget.addEvent("onResetSearch",(function(){r.$emit("onSearch","")}))}},80:function(t,e,a){"use strict";var s=a(26);a.n(s).a},81:function(t,e,a){(t.exports=a(5)(!1)).push([t.i,"\nhtml, body {\r\n    overflow-y: auto !important;\r\n    width: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n    background-color:#ffffff;\n}\r\n",""])}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{14:function(e,t,a){var n=a(178);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insert:"head",singleton:!1};a(13)(n,s);n.locals&&(e.exports=n.locals)},176:function(e,t,a){var n={"./af":18,"./af.js":18,"./ar":19,"./ar-dz":20,"./ar-dz.js":20,"./ar-kw":21,"./ar-kw.js":21,"./ar-ly":22,"./ar-ly.js":22,"./ar-ma":23,"./ar-ma.js":23,"./ar-sa":24,"./ar-sa.js":24,"./ar-tn":25,"./ar-tn.js":25,"./ar.js":19,"./az":26,"./az.js":26,"./be":27,"./be.js":27,"./bg":28,"./bg.js":28,"./bm":29,"./bm.js":29,"./bn":30,"./bn-bd":31,"./bn-bd.js":31,"./bn.js":30,"./bo":32,"./bo.js":32,"./br":33,"./br.js":33,"./bs":34,"./bs.js":34,"./ca":35,"./ca.js":35,"./cs":36,"./cs.js":36,"./cv":37,"./cv.js":37,"./cy":38,"./cy.js":38,"./da":39,"./da.js":39,"./de":40,"./de-at":41,"./de-at.js":41,"./de-ch":42,"./de-ch.js":42,"./de.js":40,"./dv":43,"./dv.js":43,"./el":44,"./el.js":44,"./en-au":45,"./en-au.js":45,"./en-ca":46,"./en-ca.js":46,"./en-gb":47,"./en-gb.js":47,"./en-ie":48,"./en-ie.js":48,"./en-il":49,"./en-il.js":49,"./en-in":50,"./en-in.js":50,"./en-nz":51,"./en-nz.js":51,"./en-sg":52,"./en-sg.js":52,"./eo":53,"./eo.js":53,"./es":54,"./es-do":55,"./es-do.js":55,"./es-mx":56,"./es-mx.js":56,"./es-us":57,"./es-us.js":57,"./es.js":54,"./et":58,"./et.js":58,"./eu":59,"./eu.js":59,"./fa":60,"./fa.js":60,"./fi":61,"./fi.js":61,"./fil":62,"./fil.js":62,"./fo":63,"./fo.js":63,"./fr":64,"./fr-ca":65,"./fr-ca.js":65,"./fr-ch":66,"./fr-ch.js":66,"./fr.js":64,"./fy":67,"./fy.js":67,"./ga":68,"./ga.js":68,"./gd":69,"./gd.js":69,"./gl":70,"./gl.js":70,"./gom-deva":71,"./gom-deva.js":71,"./gom-latn":72,"./gom-latn.js":72,"./gu":73,"./gu.js":73,"./he":74,"./he.js":74,"./hi":75,"./hi.js":75,"./hr":76,"./hr.js":76,"./hu":77,"./hu.js":77,"./hy-am":78,"./hy-am.js":78,"./id":79,"./id.js":79,"./is":80,"./is.js":80,"./it":81,"./it-ch":82,"./it-ch.js":82,"./it.js":81,"./ja":83,"./ja.js":83,"./jv":84,"./jv.js":84,"./ka":85,"./ka.js":85,"./kk":86,"./kk.js":86,"./km":87,"./km.js":87,"./kn":88,"./kn.js":88,"./ko":89,"./ko.js":89,"./ku":90,"./ku.js":90,"./ky":91,"./ky.js":91,"./lb":92,"./lb.js":92,"./lo":93,"./lo.js":93,"./lt":94,"./lt.js":94,"./lv":95,"./lv.js":95,"./me":96,"./me.js":96,"./mi":97,"./mi.js":97,"./mk":98,"./mk.js":98,"./ml":99,"./ml.js":99,"./mn":100,"./mn.js":100,"./mr":101,"./mr.js":101,"./ms":102,"./ms-my":103,"./ms-my.js":103,"./ms.js":102,"./mt":104,"./mt.js":104,"./my":105,"./my.js":105,"./nb":106,"./nb.js":106,"./ne":107,"./ne.js":107,"./nl":108,"./nl-be":109,"./nl-be.js":109,"./nl.js":108,"./nn":110,"./nn.js":110,"./oc-lnc":111,"./oc-lnc.js":111,"./pa-in":112,"./pa-in.js":112,"./pl":113,"./pl.js":113,"./pt":114,"./pt-br":115,"./pt-br.js":115,"./pt.js":114,"./ro":116,"./ro.js":116,"./ru":117,"./ru.js":117,"./sd":118,"./sd.js":118,"./se":119,"./se.js":119,"./si":120,"./si.js":120,"./sk":121,"./sk.js":121,"./sl":122,"./sl.js":122,"./sq":123,"./sq.js":123,"./sr":124,"./sr-cyrl":125,"./sr-cyrl.js":125,"./sr.js":124,"./ss":126,"./ss.js":126,"./sv":127,"./sv.js":127,"./sw":128,"./sw.js":128,"./ta":129,"./ta.js":129,"./te":130,"./te.js":130,"./tet":131,"./tet.js":131,"./tg":132,"./tg.js":132,"./th":133,"./th.js":133,"./tk":134,"./tk.js":134,"./tl-ph":135,"./tl-ph.js":135,"./tlh":136,"./tlh.js":136,"./tr":137,"./tr.js":137,"./tzl":138,"./tzl.js":138,"./tzm":139,"./tzm-latn":140,"./tzm-latn.js":140,"./tzm.js":139,"./ug-cn":141,"./ug-cn.js":141,"./uk":142,"./uk.js":142,"./ur":143,"./ur.js":143,"./uz":144,"./uz-latn":145,"./uz-latn.js":145,"./uz.js":144,"./vi":146,"./vi.js":146,"./x-pseudo":147,"./x-pseudo.js":147,"./yo":148,"./yo.js":148,"./zh-cn":149,"./zh-cn.js":149,"./zh-hk":150,"./zh-hk.js":150,"./zh-mo":151,"./zh-mo.js":151,"./zh-tw":152,"./zh-tw.js":152};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id=176},177:function(e,t,a){"use strict";var n=a(14);a.n(n).a},178:function(e,t,a){(e.exports=a(6)(!1)).push([e.i,"\nhtml, body {\n    overflow-y: auto !important;\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    background-color:#ffffff;\n    overflow: hidden;\n}\n#drop {\n    width: 90vh;\n    height: 90vh;\n\n    border-style: dashed;\n    border-color: lightgray;\n    border-width: 4px;\n    border-radius: 20%;\n\n    background-image: url(https://blenminer.github.io/widgets/LiveTables/assets/cloud.png);\n    background-size: 60%;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-color: #f7f7f7;\n\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -ms-transform: translate(-50%, -50%);\n    transform: translate(-50%, -50%);\n}\nsection {\n  display: grid;\n  justify-content: center;\n  align-content: center;\n\n  gap: 4px;\n  grid-auto-flow: column;\n}\n\n",""])},3:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(5),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-content",[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",height:"10",active:e.loadingbar,absolute:"",app:""}}),e._v(" "),a("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n            "+e._s(e.snackbarMsg)+"\n            "),a("v-btn",{attrs:{color:"grey",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n                Close\n            ")])],1),e._v(" "),""===e.fileId?a("center",[a("v-content",{staticStyle:{height:"100vh",width:"100%"}},[a("div",{ref:"drop",attrs:{id:"drop",width:"90vh",height:"90vh"}})])],1):a("v-content",[a("div",{staticStyle:{position:"relative",width:"100%",height:"100vh"}},[a("canvas",{ref:"generalChart",attrs:{id:"generalChart"}})])])],1)],1)};r._withStripped=!0;var o=a(207);a(155),a(162);s.a.use(o.a);var i=new s.a,l=new o.a({icons:{iconfont:"mdi"}}),d=a(173);a(174);function c(e){var t=Math.floor(e-25569),a=new Date(1e3*(86400*t)),n=e-Math.floor(e)+1e-7,s=Math.floor(86400*n),r=s%60;s-=r;var o=Math.floor(s/3600),i=Math.floor(s/60)%60;return new Date(a.getFullYear(),a.getMonth(),a.getDate(),o,i,r)}var u={name:"App",components:{},data:function(){return{loadingbar:!1,sampleText:"",search:"",fileName:"",snackbarMsg:"",snackbar:!1,fileId:"",fileSize:2,tenantId:-1,tenants:[]}},computed:{message:function(){return this.$store.state.message}},mounted:function(){var e=this,t=this;i.$on("reloadwidget",(function(){t.reload()})),void 0===widget.id?setTimeout((function(){t.tenantDataLoaded([{id:-1}])}),500):(requirejs(["DS/i3DXCompassServices/i3DXCompassServices"],(function(t){t.getPlatformServices({platformId:void 0,onComplete:e.tenantDataLoaded})})),requirejs(["DS/PlatformAPI/PlatformAPI"],(function(e){e.subscribe("file_uploaded",(function(e){e===t.fileId&&t.reload()}))})),t.$refs.drop&&requirejs(["DS/DataDragAndDrop/DataDragAndDrop"],(function(e){e.droppable(t.$refs.drop,{drop:function(e,a,n){t.objectDroped(e,a,n)}})})))},methods:{log:function(e){this.snackbarMsg=e,this.snackbar=!0},displaydata:function(e){var t=Number.parseInt(widget.getValue("_ActualPlan_")),a=Number.parseInt(widget.getValue("_RowPlan_")),n=Number.parseInt(widget.getValue("_StartCol_")),s=Number.parseInt(widget.getValue("_ColCount_")),r=this.$refs.generalChart;console.log(e);for(var o=[],i=[],l=[],u=0;u<s;++u){var j=c(e[4][n+u]);o.push(j)}for(var f=0;f<s;++f)i.push(e[a][n+f]);for(var g=0;g<s;++g)l.push(e[t][n+g]);new d.a(r,{type:"line",data:{labels:o,datasets:[{label:"Plan",data:i,backgroundColor:["rgba(54, 178, 8, 0.2)"],borderColor:["rgba(54, 178, 8, 1)"],borderWidth:1},{label:"Actual",data:l,backgroundColor:["rgba(8, 104, 178, 0.2)"],borderColor:["rgba(8, 104, 178, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time"}}}})},loadgraph:function(e){var t=this;t.loadingbar=!0,fetch(e).then((function(e){e.arrayBuffer().then((function(e){t.fileSize=e.byteLength;var a=new Worker("./static/excelLoader.js",{type:void 0});a.onerror=function(e){console.error(e.message)},a.onmessage=function(e){t.displaydata(e.data),a.terminate(),t.loadingbar=!1},a.postMessage(e)}))}))},reload:function(){var e,t,a=this;if(!0!==a.loadingbar)if(a.loadingbar=!0,a.tenantId=widget.getValue("_CurrentTenantID_"),a.fileId=widget.getValue("_FileID_"),a.fileName=widget.getValue("_FileName_"),void 0!==widget.id){var n=a.tenants[a.tenantId]["3DDrive"];""!==a.fileId?(e=n+"/resources/3ddrive/v1/bos/".concat(a.fileId,"/fileurl"),t={onComplete:function(e){var t=JSON.parse(e).url;a.loadingbar=!1,a.loadgraph(t)},onFailure:function(e){a.log(e),a.loadingbar=!1}},requirejs(["DS/WAFData/WAFData"],(function(a){a.authenticatedRequest(e,t)}))):a.loadingbar=!1}else a.loadingbar=!1,a.loadgraph("static/112 Engineering - Package Engineering Progress v3.1 (1).xlsm"),a.fileId="1"},objectDroped:function(e,t,a){var n=JSON.parse(e);console.log("object dropped!",n),"3DXContent"===n.protocol&&(this.fileId=n.data.items[0].objectId,this.fileName=n.data.items[0].displayName,widget.setValue("_FileID_",this.fileId),widget.setValue("_FileName_",this.fileName),this.reload())},tenantDataLoaded:function(e){console.log("tenants: ",e),this.tenants=[];for(var t=[],a=0,n=0;n<e.length;n++)void 0!==e[n]["3DDrive"]&&(t.push({value:"".concat(a++),label:"".concat(e[n].platformId," - ").concat(e[n].displayName)}),this.tenants.push(e[n]));widget.addPreference({name:"_RowPlan_",type:"text",label:"Plan Row",defaultValue:"60",options:t}),widget.addPreference({name:"_ActualPlan_",type:"text",label:"Actual Row",defaultValue:"192",options:t}),widget.addPreference({name:"_StartCol_",type:"text",label:"Actual Row",defaultValue:"12",options:t}),widget.addPreference({name:"_ColCount_",type:"text",label:"Actual Row",defaultValue:"116",options:t}),widget.addPreference({name:"_CurrentTenantID_",type:"list",label:"Tenant",defaultValue:"0",options:t}),widget.addPreference({name:"_FileID_",type:"text",label:"File Object ID",defaultValue:""}),widget.addPreference({name:"_FileName_",type:"text",label:"File Name",defaultValue:""}),i.$emit("reloadwidget")}}},j=(a(177),a(179)),f=a(180),g=a.n(f),p=a(205),h=a(208),b=a(210),m=a(209),v=a(206),w=Object(j.a)(u,r,[],!1,null,null,null);g()(w,{VApp:p.a,VBtn:h.a,VContent:b.a,VProgressLinear:m.a,VSnackbar:v.a}),w.options.__file="src/components/app.vue";var k=w.exports,y=a(197);s.a.use(y.a);var _=new y.a.Store({state:{},mutations:{},getters:{}});t.default=function(){widget.addEvent("onLoad",(function(){n.b.disableCSS(!0),window.title="Tablue Vue",widget.setTitle(window.title),new s.a({store:_,vuetify:l,render:function(e){return e(k)}}).$mount("app")})),widget.addEvent("onRefresh",(function(){i.$emit("reloadwidget")})),widget.addEvent("onSearch",(function(e){i.$emit("onSearch",e)})),widget.addEvent("onResetSearch",(function(){i.$emit("onSearch","")}))}}}]);